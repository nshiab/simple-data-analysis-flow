(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{88874:function(e,t,a){Promise.resolve().then(a.bind(a,25155)),Promise.resolve().then(a.bind(a,29079))},25155:function(e,t,a){"use strict";a.d(t,{default:function(){return eB}});var n=a(57437),l=a(2265),s=a(29079),i=a(94987);a(70605);var o=a(22833),r=a(87592),d=a(22468),c=a(28165),u=a(44839),f=a(96164);function m(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,f.m6)((0,u.W)(t))}let x=o.fC,h=o.xz;o.ZA,o.Uv;let v=o.Tr;o.Ee;let p=l.forwardRef((e,t)=>{let{className:a,inset:l,children:s,...i}=e;return(0,n.jsxs)(o.fF,{ref:t,className:m("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",l&&"pl-8",a),...i,children:[s,(0,n.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})});p.displayName=o.fF.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(o.tu,{ref:t,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});g.displayName=o.tu.displayName;let j=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(o.Uv,{children:(0,n.jsx)(o.VY,{ref:t,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});j.displayName=o.VY.displayName;let b=l.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,n.jsx)(o.ck,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...s})});b.displayName=o.ck.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:s,...i}=e;return(0,n.jsxs)(o.oC,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),l]})}).displayName=o.oC.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(o.Rk,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=o.Rk.displayName,l.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,n.jsx)(o.__,{ref:t,className:m("px-2 py-1.5 text-sm font-semibold text-foreground",l&&"pl-8",a),...s})}).displayName=o.__.displayName;let y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(o.Z0,{ref:t,className:m("-mx-1 my-1 h-px bg-border",a),...l})});y.displayName=o.Z0.displayName;let w=1;function S(e){let{start:t,setNodes:a,children:i}=e,{screenToFlowPosition:o}=(0,s._K)(),r=(0,l.useCallback)((e,n,l)=>{let s={id:"node".concat(t+w++),position:o({x:e,y:n}),type:l,data:{instance:null},origin:[.5,0]};a(e=>e.concat(s))},[a,o,t]);return(0,n.jsxs)(x,{children:[(0,n.jsx)(h,{children:i}),(0,n.jsxs)(j,{className:"w-64",children:[(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"ST"),children:"New SimpleTable"}),(0,n.jsx)(y,{}),(0,n.jsxs)(v,{children:[(0,n.jsx)(p,{children:"Importing data"}),(0,n.jsxs)(g,{className:"w-48",children:[(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"FetchData"),children:"Fetch data"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"FetchGeoData"),children:"Fetch geo data"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"LoadFile"),children:"Load file"})]})]}),(0,n.jsxs)(v,{children:[(0,n.jsx)(p,{children:"Restructuring data"}),(0,n.jsxs)(g,{className:"w-48",children:[(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"AddColumn"),children:"Add column"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"Filter"),children:"Filter"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"Join"),children:"Join"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"RenameColumns"),children:"Rename columns"})]})]}),(0,n.jsxs)(v,{children:[(0,n.jsx)(p,{children:"Analyzing data"}),(0,n.jsxs)(g,{className:"w-48",children:[(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"LinearRegressions"),children:"Linear regression"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"Sort"),children:"Sort"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"Summarize"),children:"Summarize"})]})]}),(0,n.jsxs)(v,{children:[(0,n.jsx)(p,{children:"Geospatial"}),(0,n.jsxs)(g,{className:"w-48",children:[(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"JoinGeo"),children:"Join geo"}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"Points"),children:"Points"})]})]}),(0,n.jsx)(y,{}),(0,n.jsx)(b,{onClick:e=>r(e.clientX,e.clientY,"LogTable"),children:"Log table"})]})]})}var C=a(6);let N=null,R=!1,T=!1;async function k(e){var t;return N||R||T||(R=!0,N=await (0,C.e$)({themes:["slack-ochin"],langs:["ts"]}),T=!0),null!==(t=null==N?void 0:N.codeToHtml(e,{lang:"ts",theme:"slack-ochin"}))&&void 0!==t?t:""}function Z(){return(0,n.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var E=a(71538),L=a(12218);let V=(0,L.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=l.forwardRef((e,t)=>{let{className:a,variant:l,size:s,asChild:i=!1,...o}=e,r=i?E.g7:"button";return(0,n.jsx)(r,{className:m(V({variant:l,size:s,className:a})),ref:t,...o})});function D(){return(0,n.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function _(e){let{code:t,border:a,left:s}=e,[i,o]=(0,l.useState)(""),[r,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){o(await k(t))}()},[t]);let c=(0,l.useCallback)(()=>{navigator.clipboard.writeText(t)},[t]);return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"absolute m-auto left-auto right-0",children:[(0,n.jsx)(F,{variant:"outline",size:"icon",className:a?"bg-white m-2":"m-1 h-9 px-0 border-none",onClick:()=>d(!r),children:(0,n.jsx)(Z,{})}),r&&(0,n.jsxs)("div",{className:"absolute ".concat(s?"-translate-x-full top-2":"translate-x-14 top-0","  rounded-lg border bg-card text-card-foreground shadow-sm flex justify-between"),children:[(0,n.jsx)("div",{className:"p-4",dangerouslySetInnerHTML:{__html:i}}),(0,n.jsx)("div",{children:(0,n.jsx)(F,{variant:"outline",size:"icon",className:"m-1 h-9 px-0 py-0 border-none",onClick:c,children:(0,n.jsx)(D,{})})})]})]})})}function P(){let[e,t]=(0,l.useState)(!1),[a,i]=(0,l.useState)(""),o=(0,s.SM)(),r=(0,l.useMemo)(()=>o.map(e=>e.id),[o]),d=(0,s.$P)(r);return(0,l.useEffect)(()=>{e&&i(d.map(e=>e.data.code).filter(e=>""!==e&&null!=e).join("\n\n"))},[d,e]),(0,n.jsx)("div",{className:"z-10",onClick:()=>t(!e),children:(0,n.jsx)(_,{code:a,border:!0,left:!0})})}F.displayName="Button";let z=[{id:"node1",type:"SDB",position:{x:0,y:-100},data:{instance:null},origin:[.5,0]},{id:"node2",type:"ST",position:{x:-100,y:50},data:{instance:null},origin:[.5,0]},{id:"node3",type:"FetchData",position:{x:-150,y:300},data:{instance:null},origin:[.5,0]},{id:"node4",type:"ST",position:{x:250,y:50},data:{instance:null},origin:[.5,0]},{id:"node5",type:"LoadGeoFile",position:{x:500,y:300},data:{instance:null},origin:[.5,0]},{id:"node6",type:"LogTable",position:{x:500,y:550},data:{instance:null},origin:[0,0]},{id:"node7",type:"Points",position:{x:-300,y:600},data:{instance:null},origin:[.5,0]},{id:"node8",type:"LogTable",position:{x:-600,y:1050},data:{instance:null},origin:[.5,0]},{id:"node9",type:"JoinGeo",position:{x:200,y:600},data:{instance:null},origin:[.5,0]},{id:"node10",type:"Summarize",position:{x:-200,y:1100},data:{instance:null},origin:[0,0]},{id:"node11",type:"RenameColumns",position:{x:400,y:1200},data:{instance:null},origin:[0,0]},{id:"node12",type:"Sort",position:{x:800,y:1200},data:{instance:null},origin:[0,0]},{id:"node13",type:"LogTable",position:{x:800,y:1600},data:{instance:null},origin:[0,0]}],A=[{id:"edge1",source:"node1",target:"node2"},{id:"edge2",source:"node2",target:"node3"},{id:"edge4",source:"node1",target:"node4"},{id:"edge5",source:"node4",target:"node5"},{id:"edge6",source:"node5",target:"node6"},{id:"edge7",source:"node3",target:"node7"},{id:"edge8",source:"node7",target:"node8"},{id:"edge9",source:"node7",target:"node9",targetHandle:"left"},{id:"edge10",source:"node5",target:"node9",targetHandle:"right"},{id:"edge11",source:"node9",target:"node10"},{id:"edge12",source:"node10",target:"node11"},{id:"edge13",source:"node11",target:"node12"},{id:"edge14",source:"node12",target:"node13"}],M=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});M.displayName="Card";let O=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("flex flex-col space-y-1.5 p-6",a),...l})});O.displayName="CardHeader";let H=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("h3",{ref:t,className:m("text-2xl font-semibold leading-none tracking-tight",a),...l})});H.displayName="CardTitle";let J=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("p",{ref:t,className:m("text-sm text-muted-foreground",a),...l})});J.displayName="CardDescription";let Y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("p-6 pt-0",a),...l})});Y.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter";var G=a(75313);function B(e){let{sourceReady:t}=e;return(0,n.jsx)(s.HH,{type:"source",position:i.Ly.Bottom,style:{width:"50px",height:"4px",borderRadius:"0 0 4px 4px",border:"none",position:"relative",transform:"translate(-50%, -1px)",background:t?"#94a3b8":"#d3d3d3"}})}function $(e){let{targetReady:t,id:a}=e;return(0,n.jsx)(s.HH,{id:a,type:"target",position:i.Ly.Top,style:{width:"50px",height:"5px",borderRadius:"4px 4px 0 0",border:"none",position:"relative",transform:"translate(-50%, 1px)",background:t?"#94a3b8":"#d3d3d3"}})}let K=l.forwardRef((e,t)=>{let{className:a,type:l,...s}=e;return(0,n.jsx)("input",{type:l,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:cursor-pointer placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});K.displayName="Input";var q=a(38364);let X=(0,L.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(q.f,{ref:t,className:m(X(),a),...l})});function U(e){let{smallMargin:t,children:a}=e;return(0,n.jsx)("div",{className:"flex items-center space-x-2 ".concat(t?"my-2":"my-4"),children:a})}function W(e){let{label:t,defaultValue:a,onChange:l}=e;return(0,n.jsxs)(U,{children:[(0,n.jsx)(I,{children:t}),(0,n.jsx)(K,{type:"text",className:"w-50",defaultValue:a,onChange:l})]})}I.displayName=q.f.displayName;var Q=a(74454),ee=a(64756),et=a(42421);let ea=ee.fC,en=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ee.ck,{ref:t,className:m(a),...l})});en.displayName="AccordionItem";let el=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsx)(ee.h4,{className:"flex",children:(0,n.jsxs)(ee.xz,{ref:t,className:m("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...s,children:[l,(0,n.jsx)(et.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});el.displayName=ee.xz.displayName;let es=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsx)(ee.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:(0,n.jsx)("div",{className:m("pb-4 pt-0",a),children:l})})});function ei(e){let{children:t}=e;return(0,n.jsx)(ea,{type:"single",collapsible:!0,className:"mt-3",children:(0,n.jsxs)(en,{value:"item-1",children:[(0,n.jsx)(el,{children:"Options"}),(0,n.jsx)(es,{children:t})]})})}es.displayName=ee.VY.displayName;var eo=a(69324);let er=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eo.fC,{ref:t,className:m("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,n.jsx)(eo.z$,{className:m("flex items-center justify-center text-current"),children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})})});function ed(e){let{label:t,defaultChecked:a,onChange:l,smallMargin:s}=e;return(0,n.jsxs)(U,{smallMargin:s,children:[(0,n.jsx)(er,{defaultChecked:a,onCheckedChange:l}),(0,n.jsx)(I,{className:"".concat(s?"font-normal":""),children:t})]})}er.displayName=eo.fC.displayName;var ec=a(53267),eu=a(14392);let ef=ec.fC,em=ec.ZA,ex=ec.B4,eh=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(ec.xz,{ref:t,className:m("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[l,(0,n.jsx)(ec.JO,{asChild:!0,children:(0,n.jsx)(et.Z,{className:"h-4 w-4 opacity-50"})})]})});eh.displayName=ec.xz.displayName;let ev=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ec.u_,{ref:t,className:m("flex cursor-default items-center justify-center py-1",a),...l,children:(0,n.jsx)(eu.Z,{className:"h-4 w-4"})})});ev.displayName=ec.u_.displayName;let ep=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ec.$G,{ref:t,className:m("flex cursor-default items-center justify-center py-1",a),...l,children:(0,n.jsx)(et.Z,{className:"h-4 w-4"})})});ep.displayName=ec.$G.displayName;let eg=l.forwardRef((e,t)=>{let{className:a,children:l,position:s="popper",...i}=e;return(0,n.jsx)(ec.h_,{children:(0,n.jsxs)(ec.VY,{ref:t,className:m("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...i,children:[(0,n.jsx)(ev,{}),(0,n.jsx)(ec.l_,{className:m("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,n.jsx)(ep,{})]})})});eg.displayName=ec.VY.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ec.__,{ref:t,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=ec.__.displayName;let ej=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(ec.ck,{ref:t,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(ec.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(ec.eT,{children:l})]})});function eb(e){let{label:t,placeholder:a,items:l,onChange:s,value:i}=e;return(0,n.jsxs)(U,{children:[(0,n.jsx)(I,{children:t}),(0,n.jsxs)(ef,{onValueChange:s,value:i,children:[(0,n.jsx)(eh,{className:"w-[180px]",children:(0,n.jsx)(ex,{placeholder:a})}),(0,n.jsx)(eg,{children:(0,n.jsx)(em,{children:l.map((e,t)=>(0,n.jsx)(ej,{value:e.value,children:e.label},t))})})]})]})}function ey(e){let{label:t,defaultValue:a,set:l}=e;return(0,n.jsxs)(U,{children:[(0,n.jsx)(I,{children:t}),(0,n.jsx)(K,{type:"number",className:"w-20",defaultValue:a,onChange:e=>l(parseInt(e.target.value))})]})}ej.displayName=ec.ck.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ec.Z0,{ref:t,className:m("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=ec.Z0.displayName;var ew=a(48059),eS=a.n(ew);function eC(e){let{show:t}=e;return t&&(0,n.jsx)("div",{className:"jsx-701ffc446e3075ed spinner",children:(0,n.jsx)(eS(),{id:"701ffc446e3075ed",children:".spinner.jsx-701ffc446e3075ed{display:inline;border:3px solid rgba(0,0,0,.1);border-left-color:black;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:16px;height:16px;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})})}function eN(e){let{loader:t,children:a}=e;return(0,n.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,n.jsx)(H,{children:a}),(0,n.jsx)(eC,{show:t})]})}function eR(e){let{error:t}=e;return t&&(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"my-4 text-red-500",children:t})})}let eT=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:m("w-full caption-bottom text-sm",a),...l})})});eT.displayName="Table";let ek=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("thead",{ref:t,className:m("[&_tr]:border-b",a),...l})});ek.displayName="TableHeader";let eZ=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("tbody",{ref:t,className:m("[&_tr:last-child]:border-0",a),...l})});eZ.displayName="TableBody";let eE=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("tfoot",{ref:t,className:m("border-t font-medium [&>tr]:last:border-b-0",a),...l})});eE.displayName="TableFooter";let eL=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("tr",{ref:t,className:m("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});eL.displayName="TableRow";let eV=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("th",{ref:t,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});eV.displayName="TableHead";let eF=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("td",{ref:t,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});eF.displayName="TableCell",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("caption",{ref:t,className:m("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var eD=a(51886);function e_(e){let{data:t,columns:a,types:l,nbRows:s}=e;return(0,n.jsxs)(eT,{children:[(0,n.jsx)(ek,{children:(0,n.jsx)(eL,{children:a.map((e,t)=>(0,n.jsxs)(eV,{className:"pb-4",children:[(0,n.jsx)("div",{children:e}),(0,n.jsx)("div",{children:l[t]})]},t))})}),(0,n.jsx)(eZ,{children:t.map((e,t)=>(0,n.jsx)(eL,{children:a.map((t,a)=>{var l;return e[t]instanceof Date?(0,n.jsx)(eF,{children:(0,eD.p6)(e[t],"Month DD, YYYY, at HH:MM period TZ",{utc:!0,abbreviations:!0})},a):"number"==typeof e[t]?(0,n.jsx)(eF,{children:(0,eD.uf)(e[t])},a):ArrayBuffer.isView(e[t])?(0,n.jsx)(eF,{children:"<Geometry>"},a):(0,n.jsx)(eF,{children:null===(l=e[t])||void 0===l?void 0:l.toString()},a)})},t))}),s&&(0,n.jsx)(eE,{children:(0,n.jsx)(eL,{children:(0,n.jsxs)(eF,{colSpan:a.length,className:"text-right",children:[(0,eD.uf)(s)," rows in total in the table"]})})})]})}let eP="geom";var ez=a(48484);let eA=l.forwardRef((e,t)=>{let{className:a,orientation:l="horizontal",decorative:s=!0,...i}=e;return(0,n.jsx)(ez.f,{ref:t,decorative:s,orientation:l,className:m("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...i})});function eM(e){let{label:t,items:a,set:s}=e,[i,o]=(0,l.useState)([]);return(0,l.useEffect)(()=>s(i),[i,s]),(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)(I,{children:t}),(0,n.jsx)("div",{className:"flex items-center flex-wrap gap-2",children:a.map((e,s)=>(0,n.jsxs)(l.Fragment,{children:[0!==s&&s!==a.length-1&&(0,n.jsx)(eA,{orientation:"vertical",className:"h-5"},"".concat(t,"-sep-").concat(s)),(0,n.jsx)(ed,{smallMargin:!0,label:e.label,onChange:t=>{t?i.includes(e.value)||o([...i,e.value]):o(i.filter(t=>t!==e.value))}},"".concat(t,"-check-").concat(s))]},"".concat(t,"-div-").concat(s)))})]})}function eO(e){let{items:t,setValues:a}=e,[s,i]=(0,l.useState)({});return(0,l.useEffect)(()=>{a(s)},[s,a]),(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>(0,n.jsx)(W,{label:e.label,defaultValue:e.defaultValue,onChange:t=>{let a={...s};a[e.label]=t.target.value,i(a)}},t))})}eA.displayName=ez.f.displayName;let eH=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("textarea",{className:m("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});function eJ(e){let{label:t,set:a}=e,s=(0,l.useRef)(null);return(0,n.jsxs)(U,{children:[(0,n.jsx)(I,{children:t}),(0,n.jsxs)("div",{className:"grid w-full gap-2",children:[(0,n.jsx)(eH,{ref:s}),(0,n.jsx)(F,{onClick:()=>{var e;a(null===(e=s.current)||void 0===e?void 0:e.value)},children:"Run"})]})]})}eH.displayName="Textarea";var eY=a(50750),eG={SDB:function(e){let{id:t}=e,{updateNodeData:a}=(0,s._K)(),[i,o]=(0,l.useState)(""),[r,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async function(){let e=await new G.Z().start(),n='// For front-end projects, switch to SimpleWebDB\nimport { SimpleDB } from "simple-data-analysis";\n\nconst sdb = new SimpleDB();';o(n),a(t,{instance:e,code:n}),d(!0)})()},[t,a]),(0,n.jsxs)("div",{children:[(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:i}),(0,n.jsxs)(O,{children:[(0,n.jsx)(H,{children:"SimpleDB"}),(0,n.jsx)(J,{children:"This is your in-memory database."})]})]}),(0,n.jsx)(B,{sourceReady:r})]})},ST:function(e){var t;let{id:a}=e,{updateNodeData:i}=(0,s._K)(),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),u=(0,s.Vc)({type:"target"}),f=(0,s.$P)(null===(t=u[0])||void 0===t?void 0:t.source),[m,x]=(0,l.useState)("".concat(a)),[h,v]=(0,l.useState)("");return(0,l.useEffect)(()=>{var e;let t=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;if(t instanceof G.Z){r(!0);let e="const ".concat(m,' = sdb.newTable("').concat(m,'");');v(e),i(a,{instance:t.newTable(m),code:e}),c(!0)}},[f,a,i,m]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:o}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:h}),(0,n.jsxs)(O,{children:[(0,n.jsx)(H,{children:"SimpleTable"}),(0,n.jsx)(J,{children:"This is a table in the database."})]}),(0,n.jsx)(Y,{children:(0,n.jsx)(W,{label:"Name",defaultValue:"".concat(a),onChange:e=>x(e.target.value)})})]}),(0,n.jsx)(B,{sourceReady:d})]})},FetchData:function(e){var t;let{id:a}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0),[u,f]=(0,l.useState)(void 0),[m,x]=(0,l.useState)(!0),[h,v]=(0,l.useState)(void 0),[p,g]=(0,l.useState)(void 0),{updateNodeData:j}=(0,s._K)(),b=(0,s.Vc)({type:"target"}),y=(0,s.$P)(null===(t=b[0])||void 0===t?void 0:t.source),[w,S]=(0,l.useState)(""),[C,N]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),[k,Z]=(0,l.useState)(!1),[E,L]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e;let t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(t instanceof Q.Z&&T(!0),t instanceof Q.Z&&"string"==typeof o)try{N(!0),await t.fetchData(o,{fileType:u,autoDetect:d,header:m,delim:h,skip:p});let e="// More options available. Check documentation.\nawait ".concat(t.name,'.loadData("').concat(o,'", {\n  fileType: ').concat("string"==typeof u?'"'.concat(u,'"'):"undefined",",\n  autoDetect: ").concat(d,",\n  header: ").concat(m,",\n  delim: ").concat("string"==typeof h?'"'.concat(h,'"'):"undefined",",\n  skip: ").concat(p,",\n});");S(e),j(a,{instance:t,code:e}),L(null),N(!1),Z(!0)}catch(e){console.error(e),L(e.message),N(!1),Z(!0)}})()},[y,a,j,o,u,d,m,h,p]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:R}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:w}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:C,children:"Fetch data"}),(0,n.jsx)(J,{children:"Fetches data (CSV, JSON, and Parquet files) from a URL."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 my-4",children:[(0,n.jsx)(K,{ref:i,type:"url",placeholder:"URL",onKeyDown:e=>"Enter"===e.key&&i.current?r(i.current.value):null}),(0,n.jsx)(F,{type:"button",onClick:()=>{i.current&&r(i.current.value)},children:"Fetch"})]}),(0,n.jsx)(eR,{error:E}),(0,n.jsxs)(ei,{children:[(0,n.jsx)(ed,{label:"Auto-detect",defaultChecked:!0,onChange:e=>c(e)}),(0,n.jsx)(eb,{label:"File type:",placeholder:"",items:[{value:"csv",label:"CSV"},{value:"dsv",label:"DSV"},{value:"json",label:"JSON"},{value:"parquet",label:"Parquet"}],onChange:e=>f(e)}),(0,n.jsx)(ed,{defaultChecked:!0,onChange:e=>x(e),label:"Header"}),(0,n.jsx)(W,{label:"Delimiter:",defaultValue:"",onChange:e=>v(e.target.value)}),(0,n.jsx)(ey,{label:"Skip rows:",defaultValue:0,set:g})]})]})]}),(0,n.jsx)(B,{sourceReady:k})]})},LoadFile:function(e){var t;let{id:a}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0),[u,f]=(0,l.useState)(void 0),[m,x]=(0,l.useState)(!0),[h,v]=(0,l.useState)(void 0),[p,g]=(0,l.useState)(void 0),{updateNodeData:j}=(0,s._K)(),b=(0,s.Vc)({type:"target"}),y=(0,s.$P)(null===(t=b[0])||void 0===t?void 0:t.source),[w,S]=(0,l.useState)(""),[C,N]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),[k,Z]=(0,l.useState)(!1),[E,L]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e;let t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(t instanceof Q.Z&&T(!0),t instanceof Q.Z&&o instanceof File)try{N(!0);let e=t.db,n=t.connection,l=o.name.split(".").at(-1);"csv"===u||"csv"===l||"dsv"===u||"string"==typeof h?(await e.registerFileHandle(o.name,o,eY.qr.BROWSER_FILEREADER,!0),await n.insertCSVFromPath(o.name,{name:t.name,detect:null==d||d,header:null==m||m,delimiter:null!=h?h:",",skip:p})):"json"===u||"json"===l?(await e.registerFileText(o.name,await o.text()),await n.insertJSONFromPath(o.name,{name:t.name})):("parquet"===u||"parquet"===l)&&(await e.registerFileHandle(o.name,o,eY.qr.BROWSER_FILEREADER,!0),await n.query("CREATE OR REPLACE TABLE ".concat(t.name," AS SELECT * FROM parquet_scan('").concat(o.name,"')")));let s="// More options available. Check documentation.\nawait ".concat(t.name,'.loadData("').concat(o.name,'", {\n  fileType: ').concat("string"==typeof u?'"'.concat(u,'"'):"undefined",",\n  autoDetect: ").concat(d,",\n  header: ").concat(m,",\n  delim: ").concat("string"==typeof h?'"'.concat(h,'"'):"undefined",",\n  skip: ").concat(p,",\n});");S(s),j(a,{instance:t,code:s}),L(null),N(!1),Z(!0)}catch(e){console.error(e),L(e.message),N(!1),Z(!0)}})()},[y,a,j,o,u,d,m,h,p]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:R}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:w}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:C,children:"Load file"}),(0,n.jsx)(J,{children:"Loads data from a local CSV, JSON or Parquet file."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 my-4",children:(0,n.jsx)(K,{ref:i,type:"file",onChange:e=>{let t=e.target.files;t&&r(t[0])}})}),(0,n.jsx)(eR,{error:E}),(0,n.jsxs)(ei,{children:[(0,n.jsx)(ed,{label:"Auto-detect",defaultChecked:!0,onChange:e=>c(e)}),(0,n.jsx)(eb,{label:"File type:",placeholder:"",items:[{value:"csv",label:"CSV"},{value:"dsv",label:"DSV"},{value:"json",label:"JSON"},{value:"parquet",label:"Parquet"}],onChange:e=>f(e)}),(0,n.jsx)(ed,{defaultChecked:!0,onChange:e=>x(e),label:"Header"}),(0,n.jsx)(W,{label:"Delimiter:",defaultValue:"",onChange:e=>v(e.target.value)}),(0,n.jsx)(ey,{label:"Skip rows:",defaultValue:0,set:g})]})]})]}),(0,n.jsx)(B,{sourceReady:k})]})},LoadGeoFile:function(e){var t;let{id:a}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)(null),{updateNodeData:d}=(0,s._K)(),c=(0,s.Vc)({type:"target"}),u=(0,s.$P)(null===(t=c[0])||void 0===t?void 0:t.source),[f,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(!1),[v,p]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[b,y]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e;let t=null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.instance;if(t instanceof Q.Z&&p(!0),t instanceof Q.Z&&o instanceof File)try{h(!0);let e=t.db;await e.registerFileHandle(o.name,o,eY.qr.BROWSER_FILEREADER,!0),await t.sdb.customQuery("INSTALL spatial; LOAD spatial;\n            INSTALL https; LOAD https;\n            CREATE OR REPLACE TABLE ".concat(t.name," AS SELECT * FROM ST_Read('").concat(o.name,"');"));let n="// More options available. Check documentation.\nawait ".concat(t.name,'.loadGeoData("').concat(o.name,'");');m(n),d(a,{instance:t,code:n}),y(null),h(!1),j(!0)}catch(e){console.error(e),y(e.message),h(!1),j(!0)}})()},[u,a,d,o]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:v}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:f}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:x,children:"Load geo file"}),(0,n.jsx)(J,{children:"Loads spatial data from a local file."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 my-4",children:(0,n.jsx)(K,{ref:i,type:"file",onChange:e=>{let t=e.target.files;t&&r(t[0])}})}),(0,n.jsx)(eR,{error:b})]})]}),(0,n.jsx)(B,{sourceReady:g})]})},FetchGeoData:function(e){var t;let{id:a}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)(null),{updateNodeData:d}=(0,s._K)(),c=(0,s.Vc)({type:"target"}),u=(0,s.$P)(null===(t=c[0])||void 0===t?void 0:t.source),[f,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(!1),[v,p]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[b,y]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e;let t=null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.instance;if(t instanceof Q.Z&&p(!0),t instanceof Q.Z&&"string"==typeof o)try{h(!0),await t.fetchGeoData(o);let e="// For front-end projects, use fetchGeoData. \nawait ".concat(t.name,'.loadGeoData("').concat(o,'");');m(e),d(a,{instance:t,code:e}),y(null),h(!1),j(!0)}catch(e){console.error(e),y(e.message),h(!1),j(!1)}})()},[u,a,d,o]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:v}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:f}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:x,children:"Fetch geo data"}),(0,n.jsx)(J,{children:"Fetches spatial data from a URL."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-4",children:[(0,n.jsx)(K,{ref:i,type:"url",placeholder:"URL",onKeyDown:e=>"Enter"===e.key&&i.current?r(i.current.value):null}),(0,n.jsx)(F,{type:"button",onClick:()=>{i.current&&r(i.current.value)},children:"Fetch"})]}),(0,n.jsx)(eR,{error:b})]})]}),(0,n.jsx)(B,{sourceReady:g})]})},LogTable:function(e){var t;let{id:a}=e,{updateNodeData:i}=(0,s._K)(),[o,r]=(0,l.useState)(void 0),[d,c]=(0,l.useState)(null),[u,f]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),[h,v]=(0,l.useState)(null),[p,g]=(0,l.useState)(5),j=(0,s.Vc)({type:"target"}),b=(0,s.$P)(null===(t=j[0])||void 0===t?void 0:t.source),[y,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(""),[N,R]=(0,l.useState)(""),[T,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e,t,n;let l=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z){w(!0),k(!0),c(await l.getTop(null!=p?p:5));let e=await l.getColumns(),s=await l.getTypes(),o=e.map(e=>s[e]),d=await l.getNbRows();f(e),x(o),v(d);let u=null!==(n=null==b?void 0:null===(t=b.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name;r(u);let m="await ".concat(u,".logTable(").concat(null!=p?p:5,")");C(m),i(a,{instance:l,code:m}),o.some(e=>"GEOMETRY"===e)?R("Download as GeoJSON"):R("Download as CSV"),k(!1)}else c(null),f(null),x(null),v(null)}()},[b,p,a,i]);let Z=(0,l.useCallback)(async()=>{var e;let t=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;if(t instanceof Q.Z){if(Object.values(await t.getTypes()).some(e=>"GEOMETRY"===e)){let e=JSON.stringify(await t.getGeoData()),a=document.createElement("a"),n=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download="".concat(o,".geojson"),a.click()}else{let e=await t.getData(),a=(0,eD.vB)(e),n=document.createElement("a"),l=new Blob([a],{type:"text/plain"});n.href=URL.createObjectURL(l),n.download="".concat(o,".csv"),n.click()}}},[b,o]);return(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:y}),(0,n.jsxs)(M,{className:"min-w-60",children:[(0,n.jsx)(_,{code:S}),(0,n.jsxs)(O,{children:[(0,n.jsxs)(eN,{loader:T,children:["Log table","string"==typeof o?" ".concat(o):""]}),null===d&&(0,n.jsx)(J,{children:"No data."})]}),Array.isArray(d)&&Array.isArray(u)&&Array.isArray(m)&&"number"==typeof h&&(0,n.jsxs)(Y,{children:[(0,n.jsx)(ey,{label:"Number of rows to show:",defaultValue:5,set:g}),(0,n.jsx)(e_,{data:d,columns:u,types:m,nbRows:h}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)(F,{variant:"secondary",onClick:Z,children:N})})]})]})]})},Points:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(""),[r,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(eP),[f,m]=(0,l.useState)([]),{updateNodeData:x}=(0,s._K)(),h=(0,s.Vc)({type:"target"}),v=(0,s.$P)(null===(t=h[0])||void 0===t?void 0:t.source),[p,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e;let t=null==v?void 0:null===(e=v.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&m((await t.getColumns()).map(e=>({value:e,label:e})))}()},[v]);let[y,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==v?void 0:null===(e=v.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&g(!0),l instanceof Q.Z&&""!==i&&""!==r&&"string"==typeof c&&""!==c)try{C(!0);let e=await l.cloneTable({outputTable:a});await e.points(i,r,c);let s=null!==(n=null==v?void 0:null===(t=v.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,'.points("').concat(i,'", "').concat(r,'", "').concat(c,'");');w(o),x(a,{instance:e,originalTableName:s,code:o}),R(null),C(!1),b(!0)}catch(e){console.error(e),R(e.message),C(!1),b(!1)}})()},[v,a,x,i,r,c]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:p}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:y}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:S,children:"Points"}),(0,n.jsx)(J,{children:"Creates point geometries from longitude a latitude columns."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(eb,{label:"Latitude",placeholder:"Pick a column",items:f,onChange:e=>o(e)}),(0,n.jsx)(eb,{label:"Longitude",placeholder:"Pick a column",items:f,onChange:e=>d(e)}),(0,n.jsx)(W,{label:"New column",defaultValue:eP,onChange:e=>u(e.target.value)}),(0,n.jsx)(eR,{error:N})]})]}),(0,n.jsx)(B,{sourceReady:j})]})},JoinGeo:function(e){var t,a;let{id:i}=e,[o,r]=(0,l.useState)("".concat(i,"JoinGeo")),[d,c]=(0,l.useState)([]),[u,f]=(0,l.useState)([]),[m,x]=(0,l.useState)(""),[h,v]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[j,b]=(0,l.useState)(void 0),[y,w]=(0,l.useState)(void 0),[S,C]=(0,l.useState)(void 0),{updateNodeData:N}=(0,s._K)(),R=(0,s.Vc)({type:"target",id:"left"}),T=(0,s.$P)(null===(t=R[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==T?void 0:null===(e=T.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&c((await t.getColumns()).map(e=>({value:e,label:e})))}()},[T]);let k=(0,s.Vc)({type:"target",id:"right"}),Z=(0,s.$P)(null===(a=k[0])||void 0===a?void 0:a.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==Z?void 0:null===(e=Z.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&f((await t.getColumns()).map(e=>({value:e,label:e})))}()},[Z]);let[E,L]=(0,l.useState)(""),[V,F]=(0,l.useState)(!1),[D,P]=(0,l.useState)(!1),[z,A]=(0,l.useState)(!1),[H,G]=(0,l.useState)(!1),[K,q]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t;if(z){let t=null==T?void 0:null===(e=T.data)||void 0===e?void 0:e.instance;if(t instanceof Q.Z){let e=await t.getTypes();for(let t of Object.keys(e))if("GEOMETRY"===e[t]){x(t);break}}}if(H){let e=null==Z?void 0:null===(t=Z.data)||void 0===t?void 0:t.instance;if(e instanceof Q.Z){let t=await e.getTypes();for(let e of Object.keys(t))if("GEOMETRY"===t[e]){v(e);break}}}})()},[z,H,v,x,T,Z]),(0,l.useEffect)(()=>{(async function(){var e,t,a,n,l,s;let r=null==T?void 0:null===(e=T.data)||void 0===e?void 0:e.instance,d=null==Z?void 0:null===(t=Z.data)||void 0===t?void 0:t.instance;if(r instanceof Q.Z&&A(!0),d instanceof Q.Z&&G(!0),r instanceof Q.Z&&d instanceof Q.Z&&""!==m&&""!==h&&""!==p)try{F(!0);let e=await r.joinGeo(d,p,{leftTableColumn:m,rightTableColumn:h,distance:j,distanceMethod:y,type:S,outputTable:o}),t=null!==(l=null==T?void 0:null===(a=T.data)||void 0===a?void 0:a.originalTableName)&&void 0!==l?l:r.name,c=null!==(s=null==Z?void 0:null===(n=Z.data)||void 0===n?void 0:n.originalTableName)&&void 0!==s?s:d.name,u="const ".concat(o," = await ").concat(t,".joinGeo(").concat(c,', "').concat(p,'", {\n  leftTableColumn: "').concat(m,'",\n  rightTableColumn: "').concat(h,'",\n  distance: ').concat(j,",\n  distanceMethod: ").concat("string"==typeof y?'"'.concat(y,'"'):"undefined",',\n  type: "').concat(null!=S?S:"left",'",\n  outputTable: "').concat(o,'",\n})');L(u),N(i,{instance:e,originalTableName:o,code:u}),q(null),F(!1),P(!0)}catch(e){console.error(e),q(e.message),F(!1),P(!0)}})()},[T,Z,i,N,m,h,p,j,y,S,o]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-evenly -translate-x-[42%]",children:[(0,n.jsx)($,{targetReady:z,id:"left"}),(0,n.jsx)($,{targetReady:H,id:"right"})]}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:E}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:V,children:"Join geo"}),(0,n.jsx)(J,{children:"Joins two tables based on geometries."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(W,{label:"Table name",defaultValue:"".concat(i,"JoinGeo"),onChange:e=>r(e.target.value)}),(0,n.jsx)(eb,{label:"Left geometries",placeholder:"Pick a column",items:d,onChange:e=>x(e),value:m}),(0,n.jsx)(eb,{label:"Right geometries",placeholder:"Pick a column",items:u,onChange:e=>v(e),value:h}),(0,n.jsx)(eb,{label:"Method:",placeholder:"Pick a method",items:[{value:"intersect",label:"Intersect"},{value:"inside",label:"Inside"},{value:"within",label:"Within"}],onChange:e=>g(e)}),(0,n.jsx)(eR,{error:K}),(0,n.jsxs)(ei,{children:[(0,n.jsx)(ey,{label:"Distance (for method Within):",defaultValue:0,set:b}),(0,n.jsx)(eb,{label:"Distance method (if Haversine or Spheroid, the distance unit is meter):",placeholder:"SRS",items:[{value:"SRS",label:"SRS"},{value:"haversine",label:"Haversine"},{value:"spheroid",label:"Spheroid"}],onChange:e=>w(e)}),(0,n.jsx)(eb,{label:"Join type",placeholder:"Left",items:[{value:"left",label:"Left"},{value:"inner",label:"Inner"},{value:"full",label:"Full"},{value:"right",label:"right"}],onChange:e=>C(e)})]})]})]}),(0,n.jsx)(B,{sourceReady:D})]})},Summarize:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)("".concat(a,"Summarize")),[r,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),[f,m]=(0,l.useState)(["count"]),[x,h]=(0,l.useState)(2),[v,p]=(0,l.useState)([]),{updateNodeData:g}=(0,s._K)(),j=(0,s.Vc)({type:"target"}),b=(0,s.$P)(null===(t=j[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&p((await t.getColumns()).map(e=>({value:e,label:e})))}()},[b]);let[y,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[T,k]=(0,l.useState)(!1),[Z,E]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&R(!0),l instanceof Q.Z&&(null==r?void 0:r.length))try{C(!0);let e=await l.summarize({values:r,categories:c,summaries:f,decimals:x,outputTable:i}),s=null!==(n=null==b?void 0:null===(t=b.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(i," = await ").concat(s,".summarize({\n  values: ").concat(JSON.stringify(r),",\n  categories: ").concat(JSON.stringify(c),",\n  summaries: ").concat(JSON.stringify(f),",\n  decimals: ").concat(x,',\n  outputTable: "').concat(i,'",\n});');w(o),g(a,{instance:e,originalTableName:i,code:o}),E(null),C(!1),k(!0)}catch(e){console.error(e),E(e.message),C(!1),k(!1)}})()},[b,a,g,r,c,f,x,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:N}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(_,{code:y}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:S,children:"Summarize"}),(0,n.jsx)(J,{children:"Aggregates the data."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(W,{label:"Table name",defaultValue:"".concat(a,"Summarize"),onChange:e=>o(e.target.value)}),N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eM,{label:"Values",items:v,set:d}),(0,n.jsx)(eM,{label:"Categories",items:v,set:u}),(0,n.jsx)(eM,{label:"Summaries",items:[{value:"count",label:"Count"},{value:"countUnique",label:"Count uniques"},{value:"min",label:"Minimum"},{value:"max",label:"Maximum"},{value:"mean",label:"Mean"},{value:"median",label:"Median"},{value:"sum",label:"Sum"},{value:"skew",label:"Skew"},{value:"stdDev",label:"Standard deviation"},{value:"var",label:"Variance"}],set:m}),(0,n.jsx)(ey,{label:"Decimals",defaultValue:2,set:h})]}),(0,n.jsx)(eR,{error:Z})]})]}),(0,n.jsx)(B,{sourceReady:T})]})},RenameColumns:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)({}),[r,d]=(0,l.useState)([]),{updateNodeData:c}=(0,s._K)(),u=(0,s.Vc)({type:"target"}),f=(0,s.$P)(null===(t=u[0])||void 0===t?void 0:t.source),[m,x]=(0,l.useState)(!1),[h,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e;let t=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&d((await t.getColumns()).map(e=>({label:e,defaultValue:e})))}()},[f]);let[p,g]=(0,l.useState)(""),[j,b]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&x(!0),l instanceof Q.Z)try{b(!0);let e=await l.cloneTable({outputTable:a});await e.renameColumns(i);let s=null!==(n=null==f?void 0:null===(t=f.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,".renameColumns(").concat(JSON.stringify(i),");");g(o),c(a,{instance:e,originalTableName:s,code:o}),w(null),b(!1),v(!0)}catch(e){console.error(e),w(e.message),b(!1),v(!1)}})()},[f,a,c,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:m}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:p}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:j,children:"Rename columns"}),(0,n.jsx)(J,{children:"Avoid spaces and special characters."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(eO,{items:r,setValues:o}),(0,n.jsx)(eR,{error:y})]})]}),(0,n.jsx)(B,{sourceReady:h})]})},Sort:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)("asc"),[c,u]=(0,l.useState)([]),{updateNodeData:f}=(0,s._K)(),m=(0,s.Vc)({type:"target"}),x=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source),[h,v]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e;let t=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&u((await t.getColumns()).map(e=>({value:e,label:e})))}()},[x]);let[j,b]=(0,l.useState)(""),[y,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&v(!0),l instanceof Q.Z&&"string"==typeof i)try{w(!0);let e=await l.cloneTable({outputTable:a}),s={};s[i]=r,await e.sort(s);let o=null!==(n=null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,d="await ".concat(o,".sort(").concat(JSON.stringify(s),");");b(d),f(a,{instance:e,originalTableName:o,code:d}),C(null),w(!1),g(!0)}catch(e){console.error(e),C(e.message),w(!1),g(!1)}})()},[x,a,f,i,r]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:h}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:j}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:y,children:"Sort"}),(0,n.jsx)(J,{children:"Sort values in ascending or descending order."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(eb,{label:"Column",placeholder:"Pick a column",onChange:e=>o(e),items:c}),(0,n.jsx)(eb,{label:"Order",placeholder:"Ascending",onChange:e=>d(e),items:[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}]}),(0,n.jsx)(eR,{error:S})]})]}),(0,n.jsx)(B,{sourceReady:p})]})},AddColumn:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(),[r,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),{updateNodeData:f}=(0,s._K)(),m=(0,s.Vc)({type:"target"}),x=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source),[h,v]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(""),[y,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&v(!0),l instanceof Q.Z&&"string"==typeof i&&"string"==typeof r&&"string"==typeof c)try{w(!0);let e=await l.cloneTable({outputTable:a});await e.addColumn(i,r,c);let s=null!==(n=null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,'.addColumn("').concat(i,'", "').concat(r,'", `').concat(c,"`);");b(o),f(a,{instance:e,originalTableName:s,code:o}),C(null),w(!1),g(!0)}catch(e){console.error(e),C(e.message),w(!1),g(!1)}})()},[x,a,f,i,r,c]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:h}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:j}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:y,children:"Add column"}),(0,n.jsx)(J,{children:"Adds a column into the table. The definition is in SQL."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(W,{label:"New column",onChange:e=>o(e.target.value)}),(0,n.jsx)(eb,{label:"Data type",placeholder:"Pick a type",items:[{value:"string",label:"Text"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"},{value:"geometry",label:"Geometry"}],onChange:e=>d(e)}),(0,n.jsx)(eJ,{label:"Definition",set:u}),(0,n.jsx)(eR,{error:S})]})]}),(0,n.jsx)(B,{sourceReady:p})]})},Filter:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(),{updateNodeData:r}=(0,s._K)(),d=(0,s.Vc)({type:"target"}),c=(0,s.$P)(null===(t=d[0])||void 0===t?void 0:t.source),[u,f]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[h,v]=(0,l.useState)(""),[p,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&f(!0),l instanceof Q.Z&&"string"==typeof i)try{g(!0);let e=await l.cloneTable({outputTable:a});await e.filter(i);let s=null!==(n=null==c?void 0:null===(t=c.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,".filter(`").concat(i,"`);");v(o),r(a,{instance:e,originalTableName:s,code:o}),b(null),g(!1),x(!0)}catch(e){console.error(e),b(e.message),g(!1),x(!1)}})()},[c,a,r,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:u}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:h}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:p,children:"Filter"}),(0,n.jsx)(J,{children:"Filter rows in the table. The condition is in SQL."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(eJ,{label:"Condition",set:o}),(0,n.jsx)(eR,{error:j})]})]}),(0,n.jsx)(B,{sourceReady:m})]})},Join:function(e){var t,a;let{id:i}=e,[o,r]=(0,l.useState)("".concat(i,"Join")),[d,c]=(0,l.useState)([]),[u,f]=(0,l.useState)(""),[m,x]=(0,l.useState)(void 0),{updateNodeData:h}=(0,s._K)(),v=(0,s.Vc)({type:"target",id:"left"}),p=(0,s.$P)(null===(t=v[0])||void 0===t?void 0:t.source),g=(0,s.Vc)({type:"target",id:"right"}),j=(0,s.$P)(null===(a=g[0])||void 0===a?void 0:a.source);(0,l.useEffect)(()=>{!async function(){var e,t;let a=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.instance,n=null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.instance;if(a instanceof Q.Z&&n instanceof Q.Z){let e=await a.getColumns(),t=await n.getColumns(),l=[];for(let a of e){let e=t.find(e=>e===a);e&&l.push(e)}c(l.map(e=>({value:e,label:e})))}}()},[p,j]);let[b,y]=(0,l.useState)(""),[w,S]=(0,l.useState)(!1),[C,N]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),[k,Z]=(0,l.useState)(!1),[E,L]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){1===d.length&&f(d[0].value)})()},[d]),(0,l.useEffect)(()=>{(async function(){var e,t,a,n,l,s;let r=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.instance,d=null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.instance;if(r instanceof Q.Z&&T(!0),d instanceof Q.Z&&Z(!0),r instanceof Q.Z&&d instanceof Q.Z&&""!==u)try{S(!0);let e=await r.join(d,{commonColumn:u,type:m,outputTable:o}),t=null!==(l=null==p?void 0:null===(a=p.data)||void 0===a?void 0:a.originalTableName)&&void 0!==l?l:r.name,c=null!==(s=null==j?void 0:null===(n=j.data)||void 0===n?void 0:n.originalTableName)&&void 0!==s?s:d.name,f="const ".concat(o," = await ").concat(t,".join(").concat(c,', {\n  commonColumn: "').concat(u,'",\n  type: "').concat(null!=m?m:"left",'",\n  outputTable: "').concat(o,'",\n})');y(f),h(i,{instance:e,originalTableName:o,code:f}),L(null),S(!1),N(!0)}catch(e){console.error(e),L(e.message),S(!1),N(!0)}})()},[p,j,i,h,u,m,o]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-evenly -translate-x-[42%]",children:[(0,n.jsx)($,{targetReady:R,id:"left"}),(0,n.jsx)($,{targetReady:k,id:"right"})]}),(0,n.jsxs)(M,{children:[(0,n.jsx)(_,{code:b}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:w,children:"Join"}),(0,n.jsx)(J,{children:"Joins two tables based on a common column."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(W,{label:"Table name",defaultValue:"".concat(i,"Join"),onChange:e=>r(e.target.value)}),(0,n.jsx)(eb,{label:"Common column",placeholder:"Pick a column",items:d,onChange:e=>f(e),value:u}),(0,n.jsx)(eR,{error:E}),(0,n.jsx)(ei,{children:(0,n.jsx)(eb,{label:"Join type",placeholder:"Left",items:[{value:"left",label:"Left"},{value:"inner",label:"Inner"},{value:"full",label:"Full"},{value:"right",label:"right"}],onChange:e=>x(e)})})]})]}),(0,n.jsx)(B,{sourceReady:C})]})},LinearRegressions:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)("".concat(a,"LinearRegression")),[r,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),[f,m]=(0,l.useState)(["count"]),[x,h]=(0,l.useState)(2),[v,p]=(0,l.useState)([]),{updateNodeData:g}=(0,s._K)(),j=(0,s.Vc)({type:"target"}),b=(0,s.$P)(null===(t=j[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;t instanceof Q.Z&&p((await t.getColumns()).map(e=>({value:e,label:e})))}()},[b]);let[y,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[T,k]=(0,l.useState)(!1),[Z,E]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;if(l instanceof Q.Z&&R(!0),l instanceof Q.Z&&"string"==typeof r&&"string"==typeof c)try{C(!0);let e=await l.linearRegressions({x:r,y:c,categories:f,decimals:x,outputTable:i}),s=null!==(n=null==b?void 0:null===(t=b.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(i," = await ").concat(s,'.linearRegressions({\n  x: "').concat(r,'",\n  y: "').concat(c,'",\n  categories: ').concat(JSON.stringify(f),",\n  decimals: ").concat(x,',\n  outputTable: "').concat(i,'",\n});');w(o),g(a,{instance:e,originalTableName:i,code:o}),E(null),C(!1),k(!0)}catch(e){console.error(e),E(e.message),C(!1),k(!1)}})()},[b,a,g,r,c,f,x,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)($,{targetReady:N}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(_,{code:y}),(0,n.jsxs)(O,{children:[(0,n.jsx)(eN,{loader:S,children:"Linear regressions"}),(0,n.jsx)(J,{children:"The results include the slope, the y-intercept the R-squared."})]}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(W,{label:"Table name",defaultValue:"".concat(a,"LinearRegression"),onChange:e=>o(e.target.value)}),N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eb,{label:"X",items:v,placeholder:"Pick a column",onChange:e=>d(e)}),(0,n.jsx)(eb,{label:"Y",items:v,placeholder:"Pick a column",onChange:e=>u(e)}),(0,n.jsx)(eM,{label:"Categories",items:v,set:m}),(0,n.jsx)(ey,{label:"Decimals",defaultValue:2,set:h})]}),(0,n.jsx)(eR,{error:Z})]})]}),(0,n.jsx)(B,{sourceReady:T})]})}};function eB(){let[e,t]=(0,l.useState)("0");(0,l.useEffect)(()=>{function e(){let e=document.querySelector("#header");if(e){let a=e.getBoundingClientRect();t("".concat(window.innerHeight-a.height,"px"))}}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let[a,o,r]=(0,s.Rr)(z),[d,c,u]=(0,s.ll)(A),f=(0,l.useCallback)(e=>c(t=>(0,i.Z_)(e,t.filter(t=>t.targetHandle&&e.targetHandle?t.target!==e.target||t.targetHandle!==e.targetHandle:t.target!==e.target))),[c]);return"0"!==e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{}),(0,n.jsx)(S,{start:z.length,setNodes:o,children:(0,n.jsx)("div",{style:{width:"100vw",height:e},children:(0,n.jsxs)(s.x$,{nodes:a,edges:d,onNodesChange:r,onEdgesChange:u,onConnect:f,nodeTypes:eG,fitView:!0,minZoom:.25,defaultEdgeOptions:{type:"smoothstep",markerEnd:{type:i.QZ.Arrow,width:20,height:20}},connectionRadius:50,connectionLineType:i.t8.SmoothStep,children:[(0,n.jsx)(s.ZX,{}),(0,n.jsx)(s.Aq,{variant:s.T7.Dots,gap:12,size:1})]})})})]})}}},function(e){e.O(0,[3545,8319,3067,4324,2971,7023,1744],function(){return e(e.s=88874)}),_N_E=e.O()}]);