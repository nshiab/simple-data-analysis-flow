(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{88874:function(e,t,a){Promise.resolve().then(a.bind(a,2059)),Promise.resolve().then(a.bind(a,29079))},2059:function(e,t,a){"use strict";a.d(t,{default:function(){return eW}});var n=a(57437),l=a(2265),s=a(29079),i=a(94987);a(70605);var o=a(38357),r=a(87592),d=a(22468),c=a(28165),u=a(44839),f=a(96164);function m(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,f.m6)((0,u.W)(t))}let x=o.fC,v=o.xz;o.ZA,o.Uv;let p=o.Tr;o.Ee;let h=l.forwardRef((e,t)=>{let{className:a,inset:l,children:s,...i}=e;return(0,n.jsxs)(o.fF,{ref:t,className:m("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",l&&"pl-8",a),...i,children:[s,(0,n.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})});h.displayName=o.fF.displayName;let j=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(o.tu,{ref:t,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});j.displayName=o.tu.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(o.Uv,{children:(0,n.jsx)(o.VY,{ref:t,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});g.displayName=o.VY.displayName;let y=l.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,n.jsx)(o.ck,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...s})});y.displayName=o.ck.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:s,...i}=e;return(0,n.jsxs)(o.oC,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),l]})}).displayName=o.oC.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(o.Rk,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=o.Rk.displayName,l.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,n.jsx)(o.__,{ref:t,className:m("px-2 py-1.5 text-sm font-semibold text-foreground",l&&"pl-8",a),...s})}).displayName=o.__.displayName;let b=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(o.Z0,{ref:t,className:m("-mx-1 my-1 h-px bg-border",a),...l})});b.displayName=o.Z0.displayName;var w=a(78453);function S(e){let{setNodes:t,children:a}=e,{screenToFlowPosition:i}=(0,s._K)(),o=(0,l.useCallback)((e,a,n)=>{let l={id:"node_".concat((0,w.zv)()),position:i({x:e,y:a}),type:n,data:{},origin:[.5,0]};t(e=>e.concat(l))},[t,i]);return(0,n.jsxs)(x,{children:[(0,n.jsx)(v,{children:a}),(0,n.jsxs)(g,{className:"w-64",children:[(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"SDB"),children:"New SimpleDB"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"ST"),children:"New SimpleTable"}),(0,n.jsx)(b,{}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Analyzing data"}),(0,n.jsxs)(j,{className:"w-48",children:[(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Describe"),children:"Describe"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"LinearRegressions"),children:"Linear regression"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"ProportionsVertical"),children:"Proportions vertical"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Summarize"),children:"Summarize"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Importing data"}),(0,n.jsxs)(j,{className:"w-48",children:[(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"FetchData"),children:"Fetch data"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"FetchGeoData"),children:"Fetch geo data"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"LoadFile"),children:"Load file"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Geospatial"}),(0,n.jsxs)(j,{className:"w-48",children:[(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"JoinGeo"),children:"Join geo"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Points"),children:"Points"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Restructuring data"}),(0,n.jsxs)(j,{className:"w-48",children:[(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"AddColumn"),children:"Add column"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"CleanColumnNames"),children:"Clean column names"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Join"),children:"Join"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Longer"),children:"Longer"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"RenameColumns"),children:"Rename columns"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"SelectColumns"),children:"Select columns"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Sort"),children:"Sort"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Wider"),children:"Wider"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Selecting or filtering data"}),(0,n.jsxs)(j,{className:"w-48",children:[(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Filter"),children:"Filter"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"RemoveDuplicates"),children:"Remove duplicates"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Updating data"}),(0,n.jsx)(j,{className:"w-48",children:(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"UpdateColumn"),children:"Update column"})})]}),(0,n.jsx)(b,{}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"Note"),children:"Note"}),(0,n.jsx)(y,{onClick:e=>o(e.clientX,e.clientY,"LogTable"),children:"Log table"})]})]})}var C=a(6);let N=null,R=!1,T=!1;async function k(e){var t;return N||R||T||(R=!0,N=await (0,C.e$)({themes:["slack-ochin"],langs:["ts"]}),T=!0),null!==(t=null==N?void 0:N.codeToHtml(e,{lang:"ts",theme:"slack-ochin"}))&&void 0!==t?t:""}function E(){return(0,n.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Z=a(71538),A=a(12218);let L=(0,A.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=l.forwardRef((e,t)=>{let{className:a,variant:l,size:s,asChild:i=!1,...o}=e,r=i?Z.g7:"button";return(0,n.jsx)(r,{className:m(L({variant:l,size:s,className:a})),ref:t,...o})});function D(){return(0,n.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function V(e){let{code:t,border:a,left:s}=e,[i,o]=(0,l.useState)(""),[r,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){o(await k(t))}()},[t]);let c=(0,l.useCallback)(()=>{navigator.clipboard.writeText(t)},[t]);return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"absolute m-auto left-auto right-0",children:[(0,n.jsx)(P,{variant:"outline",size:"icon",className:a?"bg-white m-2":"m-1 h-9 px-0 border-none",onClick:()=>d(!r),children:(0,n.jsx)(E,{})}),r&&(0,n.jsxs)("div",{className:"absolute ".concat(s?"-translate-x-full top-2":"translate-x-14 top-0","  rounded-lg border bg-card text-card-foreground shadow-sm flex justify-between"),children:[(0,n.jsx)("div",{className:"p-4",dangerouslySetInnerHTML:{__html:i}}),(0,n.jsx)("div",{children:(0,n.jsx)(P,{variant:"outline",size:"icon",className:"m-1 h-9 px-0 py-0 border-none",onClick:c,children:(0,n.jsx)(D,{})})})]})]})})}function _(){let[e,t]=(0,l.useState)(!1),[a,i]=(0,l.useState)(""),o=(0,s.SM)(),r=(0,l.useMemo)(()=>o.map(e=>e.id),[o]),d=(0,s.$P)(r);return(0,l.useEffect)(()=>{e&&i(d.map(e=>e.data.code).filter(e=>""!==e&&null!=e).join("\n\n"))},[d,e]),(0,n.jsx)("div",{className:"z-10",onClick:()=>t(!e),children:(0,n.jsx)(V,{code:a,border:!0,left:!0})})}P.displayName="Button";let F="node_".concat((0,w.zv)()),z="node_".concat((0,w.zv)()),$=[{id:F,type:"SDB",position:{x:0,y:0},data:{instance:null},origin:[.5,0]},{id:z,type:"ST",position:{x:-50,y:150},data:{instance:null,name:z},origin:[.5,0]}],O=[{id:"edge_".concat((0,w.zv)()),source:F,target:z}],M=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});M.displayName="Card";let Y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("flex flex-col space-y-1.5 p-6",a),...l})});Y.displayName="CardHeader";let H=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("h3",{ref:t,className:m("text-2xl font-semibold leading-none tracking-tight",a),...l})});H.displayName="CardTitle";let J=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("p",{ref:t,className:m("text-sm text-muted-foreground",a),...l})});J.displayName="CardDescription";let B=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("p-6 pt-0",a),...l})});B.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{ref:t,className:m("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter";var K=a(75313);function X(e){let{sourceReady:t}=e;return(0,n.jsx)(s.HH,{type:"source",position:i.Ly.Bottom,style:{width:"50px",height:"4px",borderRadius:"0 0 4px 4px",border:"none",position:"relative",transform:"translate(-50%, -1px)",background:t?"#94a3b8":"#d3d3d3"}})}var U=a(48059),G=a.n(U);function q(e){let{show:t}=e;return t&&(0,n.jsx)("div",{className:"jsx-701ffc446e3075ed spinner",children:(0,n.jsx)(G(),{id:"701ffc446e3075ed",children:".spinner.jsx-701ffc446e3075ed{display:inline;border:3px solid rgba(0,0,0,.1);border-left-color:black;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:16px;height:16px;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})})}function I(e){let{loader:t,children:a}=e;return(0,n.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,n.jsx)(H,{children:a}),(0,n.jsx)(q,{show:t})]})}function W(e){let{targetReady:t,id:a}=e;return(0,n.jsx)(s.HH,{id:a,type:"target",position:i.Ly.Top,style:{width:"50px",height:"5px",borderRadius:"4px 4px 0 0",border:"none",position:"relative",transform:"translate(-50%, 1px)",background:t?"#94a3b8":"#d3d3d3"}})}let Q=l.forwardRef((e,t)=>{let{className:a,type:l,...s}=e;return(0,n.jsx)("input",{type:l,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:cursor-pointer placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});Q.displayName="Input";var ee=a(38364);let et=(0,A.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ea=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ee.f,{ref:t,className:m(et(),a),...l})});function en(e){let{smallMargin:t,children:a}=e;return(0,n.jsx)("div",{className:"flex items-center space-x-2 ".concat(t?"my-2":"my-4"),children:a})}function el(e){let{label:t,value:a,onClick:s}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)("");return(0,l.useEffect)(()=>{r(a)},[a]),(0,n.jsxs)(en,{children:[(0,n.jsx)(ea,{children:t}),(0,n.jsx)(Q,{ref:i,type:"text",value:o,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&i.current&&s(i.current.value)}}),(0,n.jsx)(P,{onClick:()=>i.current&&"string"==typeof i.current.value&&s(i.current.value),children:"Update"})]})}ea.displayName=ee.f.displayName;var es=a(21918),ei=a(64756),eo=a(42421);let er=ei.fC,ed=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ei.ck,{ref:t,className:m(a),...l})});ed.displayName="AccordionItem";let ec=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsx)(ei.h4,{className:"flex",children:(0,n.jsxs)(ei.xz,{ref:t,className:m("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...s,children:[l,(0,n.jsx)(eo.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});ec.displayName=ei.xz.displayName;let eu=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsx)(ei.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:(0,n.jsx)("div",{className:m("pb-4 pt-0",a),children:l})})});function ef(e){let{children:t}=e;return(0,n.jsx)(er,{type:"single",collapsible:!0,className:"mt-3",children:(0,n.jsxs)(ed,{value:"item-1",children:[(0,n.jsx)(ec,{children:"Options"}),(0,n.jsx)(eu,{children:t})]})})}eu.displayName=ei.VY.displayName;var em=a(69324);let ex=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(em.fC,{ref:t,className:m("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,n.jsx)(em.z$,{className:m("flex items-center justify-center text-current"),children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})})});function ev(e){let{label:t,defaultChecked:a,checked:l,onChange:s,smallMargin:i}=e;return(0,n.jsxs)(en,{smallMargin:i,children:[(0,n.jsx)(ex,{checked:l,defaultChecked:a,onCheckedChange:s}),(0,n.jsx)(ea,{className:"".concat(i?"font-normal":""),children:t})]})}ex.displayName=em.fC.displayName;var ep=a(53267),eh=a(14392);let ej=ep.fC,eg=ep.ZA,ey=ep.B4,eb=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(ep.xz,{ref:t,className:m("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[l,(0,n.jsx)(ep.JO,{asChild:!0,children:(0,n.jsx)(eo.Z,{className:"h-4 w-4 opacity-50"})})]})});eb.displayName=ep.xz.displayName;let ew=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ep.u_,{ref:t,className:m("flex cursor-default items-center justify-center py-1",a),...l,children:(0,n.jsx)(eh.Z,{className:"h-4 w-4"})})});ew.displayName=ep.u_.displayName;let eS=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ep.$G,{ref:t,className:m("flex cursor-default items-center justify-center py-1",a),...l,children:(0,n.jsx)(eo.Z,{className:"h-4 w-4"})})});eS.displayName=ep.$G.displayName;let eC=l.forwardRef((e,t)=>{let{className:a,children:l,position:s="popper",...i}=e;return(0,n.jsx)(ep.h_,{children:(0,n.jsxs)(ep.VY,{ref:t,className:m("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...i,children:[(0,n.jsx)(ew,{}),(0,n.jsx)(ep.l_,{className:m("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,n.jsx)(eS,{})]})})});eC.displayName=ep.VY.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ep.__,{ref:t,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=ep.__.displayName;let eN=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(ep.ck,{ref:t,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(ep.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(ep.eT,{children:l})]})});function eR(e){let{label:t,placeholder:a,items:l,onChange:s,value:i}=e;return(0,n.jsxs)(en,{children:[(0,n.jsx)(ea,{children:t}),(0,n.jsxs)(ej,{onValueChange:s,value:i,children:[(0,n.jsx)(eb,{className:"w-[180px]",children:(0,n.jsx)(ey,{placeholder:a})}),(0,n.jsx)(eC,{children:(0,n.jsx)(eg,{children:l.map((e,t)=>(0,n.jsx)(eN,{value:e.value,children:e.label},t))})})]})]})}function eT(e){let{label:t,value:a,set:l}=e;return(0,n.jsxs)(en,{children:[(0,n.jsx)(ea,{children:t}),(0,n.jsx)(Q,{type:"number",className:"w-20",value:a,onChange:e=>l(parseInt(e.target.value))})]})}function ek(e){let{error:t}=e;return t&&(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"my-4 text-red-500",children:t})})}eN.displayName=ep.ck.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ep.Z0,{ref:t,className:m("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=ep.Z0.displayName;let eE=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:m("w-full caption-bottom text-sm",a),...l})})});eE.displayName="Table";let eZ=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("thead",{ref:t,className:m("[&_tr]:border-b",a),...l})});eZ.displayName="TableHeader";let eA=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("tbody",{ref:t,className:m("[&_tr:last-child]:border-0",a),...l})});eA.displayName="TableBody";let eL=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("tfoot",{ref:t,className:m("border-t font-medium [&>tr]:last:border-b-0",a),...l})});eL.displayName="TableFooter";let eP=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("tr",{ref:t,className:m("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});eP.displayName="TableRow";let eD=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("th",{ref:t,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});eD.displayName="TableHead";let eV=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("td",{ref:t,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});function e_(e){let{data:t,columns:a,types:l,nbRows:s}=e;return(0,n.jsxs)(eE,{children:[(0,n.jsx)(eZ,{children:(0,n.jsx)(eP,{children:a.map((e,t)=>(0,n.jsxs)(eD,{className:"pb-4",children:[(0,n.jsx)("div",{children:e}),l&&(0,n.jsx)("div",{children:l[t]})]},t))})}),(0,n.jsx)(eA,{children:t.map((e,t)=>(0,n.jsx)(eP,{children:a.map((t,a)=>{var l;return e[t]instanceof Date?(0,n.jsx)(eV,{children:(0,w.p6)(e[t],"Month DD, YYYY, at HH:MM period TZ",{utc:!0,abbreviations:!0})},a):"number"==typeof e[t]?(0,n.jsx)(eV,{children:(0,w.uf)(e[t])},a):ArrayBuffer.isView(e[t])?(0,n.jsx)(eV,{children:"<Geometry>"},a):(0,n.jsx)(eV,{children:null===(l=e[t])||void 0===l?void 0:l.toString()},a)})},t))}),s&&(0,n.jsx)(eL,{children:(0,n.jsx)(eP,{children:(0,n.jsxs)(eV,{colSpan:a.length,className:"text-right",children:[(0,w.uf)(s)," rows in total in the table"]})})})]})}eV.displayName="TableCell",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("caption",{ref:t,className:m("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var eF=a(48484);let ez=l.forwardRef((e,t)=>{let{className:a,orientation:l="horizontal",decorative:s=!0,...i}=e;return(0,n.jsx)(eF.f,{ref:t,decorative:s,orientation:l,className:m("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...i})});function e$(e){let{label:t,items:a,set:s,values:i}=e;return(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)(ea,{children:t}),(0,n.jsx)("div",{className:"flex items-center flex-wrap gap-2",children:a.map((e,o)=>(0,n.jsxs)(l.Fragment,{children:[0!==o&&o!==a.length-1&&(0,n.jsx)(ez,{orientation:"vertical",className:"h-5"},"".concat(t,"-sep-").concat(o)),(0,n.jsx)(ev,{smallMargin:!0,label:e.label,checked:i.includes(e.value),onChange:t=>{t?i.includes(e.value)||s([...i,e.value]):s(i.filter(t=>t!==e.value))}},"".concat(t,"-check-").concat(o))]},"".concat(t,"-div-").concat(o)))})]})}function eO(e){let{items:t,values:a,setValues:l}=e;return(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>{var s;return(0,n.jsx)(el,{label:e.label,value:null!==(s=a[e.label])&&void 0!==s?s:"",onClick:t=>{let n={...a};n[e.label]=t,l(n)}},t)})})}ez.displayName=eF.f.displayName;let eM=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("textarea",{className:m("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});function eY(e){let{label:t,set:a,value:s}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)("");return(0,l.useEffect)(()=>{r(s)},[s]),(0,n.jsx)(en,{children:(0,n.jsx)("div",{className:"grid w-full gap-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ea,{children:t}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,n.jsx)(eM,{ref:i,value:o,onChange:e=>r(e.target.value),onKeyDown:e=>"Enter"===e.key&&e.shiftKey&&i.current?a(i.current.value):null}),(0,n.jsx)(P,{onClick:()=>{i.current&&"string"==typeof i.current.value&&a(i.current.value)},children:"Run"})]})]})})})}eM.displayName="Textarea";var eH=a(45189),eJ={SDB:function(e){let{id:t}=e,{updateNodeData:a}=(0,s._K)(),[i,o]=(0,l.useState)(""),[r,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async function(){u(!0);let e=await new K.Z().start();await e.customQuery("ATTACH DATABASE '".concat(t,"' as mydb;\nuse mydb;"));let n='// For front-end projects, switch to SimpleWebDB\nimport { SimpleDB } from "simple-data-analysis";\n\nconst sdb = new SimpleDB();';o(n),a(t,{instance:e,code:n}),u(!1),d(!0)})()},[t,a]),(0,n.jsxs)("div",{children:[(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:i}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:c,children:"SimpleDB"}),(0,n.jsx)(J,{children:"This is your in-memory database."})]})]}),(0,n.jsx)(X,{sourceReady:r})]})},ST:function(e){var t;let{id:a}=e,{updateNodeData:i}=(0,s._K)(),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1),m=(0,s.Vc)({type:"target"}),[x,v]=(0,l.useState)("".concat(a)),[p,h]=(0,l.useState)(""),j=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source),g=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==g?void 0:g.data.imported)&&("string"==typeof g.data.name&&v(g.data.name),g.data.imported=!1)},[g]),(0,l.useEffect)(()=>{var e;let t=null==j?void 0:null===(e=j.data)||void 0===e?void 0:e.instance;if(t instanceof K.Z){r(!0),f(!0);let e="const ".concat(x,' = sdb.newTable("').concat(x,'");');h(e),i(a,{name:x,instance:t.newTable(x),code:e}),f(!1),c(!0)}},[j,a,i,x]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:o}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:p}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:u,children:"SimpleTable"}),(0,n.jsx)(J,{children:"This is a table in the database."})]}),(0,n.jsx)(B,{children:(0,n.jsx)(el,{label:"Name",value:x,onClick:e=>v(e)})})]}),(0,n.jsx)(X,{sourceReady:d})]})},FetchData:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)(!0),[c,u]=(0,l.useState)(void 0),[f,m]=(0,l.useState)(!0),[x,v]=(0,l.useState)(void 0),[p,h]=(0,l.useState)(0),{updateNodeData:j}=(0,s._K)(),g=(0,s.Vc)({type:"target"}),y=(0,s.$P)(null===(t=g[0])||void 0===t?void 0:t.source),[b,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[T,k]=(0,l.useState)(!1),[E,Z]=(0,l.useState)(null),A=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==A?void 0:A.data.imported)&&("string"==typeof A.data.url&&o(A.data.url),"string"==typeof A.data.fileType&&u(A.data.fileType),"boolean"==typeof A.data.autoDetect&&d(A.data.autoDetect),"boolean"==typeof A.data.header&&m(A.data.header),"string"==typeof A.data.delim&&v(A.data.delim),"number"==typeof A.data.skip&&h(A.data.skip),A.data.imported=!1)},[A]),(0,l.useEffect)(()=>{(async function(){var e;let t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(t instanceof es.Z&&R(!0),t instanceof es.Z&&"string"==typeof i)try{C(!0),await t.fetchData(i,{fileType:c,autoDetect:r,header:f,delim:x,skip:p});let e="// More options available. Check documentation.\nawait ".concat(t.name,'.loadData("').concat(i,'", {\n  fileType: ').concat("string"==typeof c?'"'.concat(c,'"'):"undefined",",\n  autoDetect: ").concat(r,",\n  header: ").concat(f,",\n  delim: ").concat("string"==typeof x?'"'.concat(x,'"'):"undefined",",\n  skip: ").concat(p,",\n});");w(e),j(a,{instance:t,code:e,url:i,fileType:c,autoDetect:r,header:f,delim:x,skip:p}),Z(null),C(!1),k(!0)}catch(e){console.error(e),Z(e.message),C(!1),k(!0)}})()},[y,a,j,i,c,r,f,x,p]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:N}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:b}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:S,children:"Fetch data"}),(0,n.jsx)(J,{children:"Fetches data (CSV, JSON, and Parquet files) from a URL."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"URL",value:null!=i?i:"",onClick:e=>o(e)}),(0,n.jsx)(ek,{error:E}),(0,n.jsxs)(ef,{children:[(0,n.jsx)(ev,{label:"Auto-detect",checked:r,onChange:e=>d(e)}),(0,n.jsx)(eR,{label:"File type:",value:null!=c?c:"",items:[{value:"csv",label:"CSV"},{value:"dsv",label:"DSV"},{value:"json",label:"JSON"},{value:"parquet",label:"Parquet"}],onChange:e=>u(e)}),(0,n.jsx)(ev,{checked:f,onChange:e=>m(e),label:"Header"}),(0,n.jsx)(el,{label:"Delimiter:",value:null!=x?x:",",onClick:e=>v(e)}),(0,n.jsx)(eT,{label:"Skip rows:",value:p,set:h})]})]})]}),(0,n.jsx)(X,{sourceReady:T})]})},LoadFile:function(e){var t;let{id:a}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0),[u,f]=(0,l.useState)(void 0),[m,x]=(0,l.useState)(!0),[v,p]=(0,l.useState)(void 0),[h,j]=(0,l.useState)(0),{updateNodeData:g}=(0,s._K)(),y=(0,s.Vc)({type:"target"}),b=(0,s.$P)(null===(t=y[0])||void 0===t?void 0:t.source),[w,S]=(0,l.useState)(""),[C,N]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1),[Z,A]=(0,l.useState)(null),L=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==L?void 0:L.data.imported)&&("string"==typeof L.data.fileType&&f(L.data.fileType),"boolean"==typeof L.data.autoDetect&&c(L.data.autoDetect),"boolean"==typeof L.data.header&&x(L.data.header),"string"==typeof L.data.delim&&p(L.data.delim),"number"==typeof L.data.skip&&j(L.data.skip),L.data.imported=!1)},[L]),(0,l.useEffect)(()=>{(async function(){var e;let t=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.instance;if(t instanceof es.Z&&T(!0),t instanceof es.Z&&o instanceof File)try{N(!0);let e=t.db,n=t.connection,l=o.name.split(".").at(-1);"csv"===u||"csv"===l||"dsv"===u||"string"==typeof v?(await e.registerFileHandle(o.name,o,eH.qr.BROWSER_FILEREADER,!0),await n.insertCSVFromPath(o.name,{name:t.name,detect:null==d||d,header:null==m||m,delimiter:null!=v?v:",",skip:h})):"json"===u||"json"===l?(await e.registerFileText(o.name,await o.text()),await n.insertJSONFromPath(o.name,{name:t.name})):("parquet"===u||"parquet"===l)&&(await e.registerFileHandle(o.name,o,eH.qr.BROWSER_FILEREADER,!0),await n.query("CREATE OR REPLACE TABLE ".concat(t.name," AS SELECT * FROM parquet_scan('").concat(o.name,"')")));let s="// More options available. Check documentation.\nawait ".concat(t.name,'.loadData("').concat(o.name,'", {\n  fileType: ').concat("string"==typeof u?'"'.concat(u,'"'):"undefined",",\n  autoDetect: ").concat(d,",\n  header: ").concat(m,",\n  delim: ").concat("string"==typeof v?'"'.concat(v,'"'):"undefined",",\n  skip: ").concat(h,",\n});");S(s),g(a,{instance:t,code:s,fileType:u,autoDetect:d,header:m,delim:v,skip:h}),A(null),N(!1),E(!0)}catch(e){console.error(e),A(e.message),N(!1),E(!0)}})()},[b,a,g,o,u,d,m,v,h]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:R}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:w}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:C,children:"Load file"}),(0,n.jsx)(J,{children:"Loads data from a local CSV, JSON or Parquet file."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 my-4",children:(0,n.jsx)(Q,{ref:i,type:"file",onChange:e=>{let t=e.target.files;t&&r(t[0])}})}),(0,n.jsx)(ek,{error:Z}),(0,n.jsxs)(ef,{children:[(0,n.jsx)(ev,{label:"Auto-detect",checked:d,onChange:e=>c(e)}),(0,n.jsx)(eR,{label:"File type:",placeholder:"",items:[{value:"csv",label:"CSV"},{value:"dsv",label:"DSV"},{value:"json",label:"JSON"},{value:"parquet",label:"Parquet"}],onChange:e=>f(e),value:null!=u?u:""}),(0,n.jsx)(ev,{checked:m,onChange:e=>x(e),label:"Header"}),(0,n.jsx)(el,{label:"Delimiter:",value:null!=v?v:"",onClick:e=>p(e)}),(0,n.jsx)(eT,{label:"Skip rows:",value:h,set:j})]})]})]}),(0,n.jsx)(X,{sourceReady:k})]})},LoadGeoFile:function(e){var t;let{id:a}=e,i=(0,l.useRef)(null),[o,r]=(0,l.useState)(null),{updateNodeData:d}=(0,s._K)(),c=(0,s.Vc)({type:"target"}),u=(0,s.$P)(null===(t=c[0])||void 0===t?void 0:t.source),[f,m]=(0,l.useState)(""),[x,v]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[y,b]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e;let t=null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.instance;if(t instanceof es.Z&&h(!0),t instanceof es.Z&&o instanceof File)try{v(!0);let e=t.db;await e.registerFileHandle(o.name,o,eH.qr.BROWSER_FILEREADER,!0),await t.sdb.customQuery("INSTALL spatial; LOAD spatial;\n            INSTALL https; LOAD https;\n            CREATE OR REPLACE TABLE ".concat(t.name," AS SELECT * FROM ST_Read('").concat(o.name,"');"));let n="// More options available. Check documentation.\nawait ".concat(t.name,'.loadGeoData("').concat(o.name,'");');m(n),d(a,{instance:t,code:n}),b(null),v(!1),g(!0)}catch(e){console.error(e),b(e.message),v(!1),g(!0)}})()},[u,a,d,o]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:p}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:f}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:x,children:"Load geo file"}),(0,n.jsx)(J,{children:"Loads spatial data from a local file."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 my-4",children:(0,n.jsx)(Q,{ref:i,type:"file",onChange:e=>{let t=e.target.files;t&&r(t[0])}})}),(0,n.jsx)(ek,{error:y})]})]}),(0,n.jsx)(X,{sourceReady:j})]})},FetchGeoData:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),{updateNodeData:r}=(0,s._K)(),d=(0,s.Vc)({type:"target"}),c=(0,s.$P)(null===(t=d[0])||void 0===t?void 0:t.source),[u,f]=(0,l.useState)(""),[m,x]=(0,l.useState)(!1),[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(null),b=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==b?void 0:b.data.imported)&&("string"==typeof b.data.url&&o(b.data.url),b.data.imported=!1)},[b]),(0,l.useEffect)(()=>{(async function(){var e;let t=null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.instance;if(t instanceof es.Z&&p(!0),t instanceof es.Z&&"string"==typeof i)try{x(!0),await t.fetchGeoData(i);let e="// For front-end projects, use fetchGeoData. \nawait ".concat(t.name,'.loadGeoData("').concat(i,'");');f(e),r(a,{instance:t,code:e,url:i}),y(null),x(!1),j(!0)}catch(e){console.error(e),y(e.message),x(!1),j(!1)}})()},[c,a,r,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:v}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:u}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:m,children:"Fetch geo data"}),(0,n.jsx)(J,{children:"Fetches spatial data from a URL."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"URL",value:null!=i?i:"",onClick:e=>o(e)}),(0,n.jsx)(ek,{error:g})]})]}),(0,n.jsx)(X,{sourceReady:h})]})},LogTable:function(e){var t;let{id:a}=e,{updateNodeData:i}=(0,s._K)(),[o,r]=(0,l.useState)(void 0),[d,c]=(0,l.useState)(null),[u,f]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),[v,p]=(0,l.useState)(null),[h,j]=(0,l.useState)(5),g=(0,s.Vc)({type:"target"}),y=(0,s.$P)(null===(t=g[0])||void 0===t?void 0:t.source),[b,S]=(0,l.useState)(!1),[C,N]=(0,l.useState)(""),[R,T]=(0,l.useState)(""),[k,E]=(0,l.useState)(!1),Z=(0,s.$P)(a);(0,l.useEffect)(()=>{(null==Z?void 0:Z.data.imported)&&("number"==typeof Z.data.nbRowsToLog&&j(Z.data.nbRowsToLog),Z.data.imported=!1)},[Z]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z){S(!0),E(!0),c(await l.getTop(null!=h?h:5));let e=await l.getColumns(),s=await l.getTypes(),o=e.map(e=>s[e]),d=await l.getNbRows();f(e),x(o),p(d);let u=null!==(n=null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name;r(u);let m="await ".concat(u,".logTable(").concat(null!=h?h:5,")");N(m),i(a,{instance:l,code:m,nbRowsToLog:null!=h?h:5}),o.some(e=>"GEOMETRY"===e)?T("Download as GeoJSON"):T("Download as CSV"),E(!1)}else c(null),f(null),x(null),p(null)})()},[y,h,a,i]);let A=(0,l.useCallback)(async()=>{var e;let t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(t instanceof es.Z){if(Object.values(await t.getTypes()).some(e=>"GEOMETRY"===e)){let e=JSON.stringify(await t.getGeoData()),a=document.createElement("a"),n=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download="".concat(o,".geojson"),a.click()}else{let e=await t.getData(),a=(0,w.vB)(e),n=document.createElement("a"),l=new Blob([a],{type:"text/plain"});n.href=URL.createObjectURL(l),n.download="".concat(o,".csv"),n.click()}}},[y,o]);return(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:b}),(0,n.jsxs)(M,{className:"min-w-96",children:[(0,n.jsx)(V,{code:C}),(0,n.jsxs)(Y,{children:[(0,n.jsxs)(I,{loader:k,children:["Log table","string"==typeof o?" ".concat(o):""]}),null===d&&(0,n.jsx)(J,{children:"No data."})]}),Array.isArray(d)&&Array.isArray(u)&&Array.isArray(m)&&"number"==typeof v&&(0,n.jsxs)(B,{children:[(0,n.jsx)(eT,{label:"Number of rows to show:",value:h,set:j}),(0,n.jsx)(e_,{data:d,columns:u,types:m,nbRows:v}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)(P,{variant:"secondary",onClick:A,children:R})})]})]})]})},Points:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)(void 0),[c,u]=(0,l.useState)("geom"),[f,m]=(0,l.useState)([]),{updateNodeData:x}=(0,s._K)(),v=(0,s.Vc)({type:"target"}),p=(0,s.$P)(null===(t=v[0])||void 0===t?void 0:t.source),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e;let t=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&m((await t.getColumns()).map(e=>({value:e,label:e})))}()},[p]);let[b,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(null),T=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==T?void 0:T.data.imported)&&(T.data.columns&&"object"==typeof T.data.columns&&m(T.data.columns),"string"==typeof T.data.lat&&o(T.data.lat),"string"==typeof T.data.lon&&d(T.data.lon),"string"==typeof T.data.newColumn&&u(T.data.newColumn),T.data.imported=!1)},[T]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&j(!0),l instanceof es.Z&&"string"==typeof i&&"string"==typeof r&&"string"==typeof c)try{C(!0);let e=await l.cloneTable({outputTable:a});await e.points(i,r,c);let s=null!==(n=null==p?void 0:null===(t=p.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,'.points("').concat(i,'", "').concat(r,'", "').concat(c,'");');w(o),x(a,{instance:e,originalTableName:s,code:o,lat:i,lon:r,newColumn:c,columns:f}),R(null),C(!1),y(!0)}catch(e){console.error(e),R(e.message),C(!1),y(!1)}})()},[p,a,x,i,r,f,c]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:h}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:b}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:S,children:"Points"}),(0,n.jsx)(J,{children:"Creates point geometries from longitude and latitude columns."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(eR,{label:"Latitude",placeholder:"Pick a column",items:f,onChange:e=>o(e),value:null!=i?i:""}),(0,n.jsx)(eR,{label:"Longitude",placeholder:"Pick a column",items:f,onChange:e=>d(e),value:null!=r?r:""}),(0,n.jsx)(el,{label:"New column",value:c,onClick:e=>u(e)}),(0,n.jsx)(ek,{error:N})]})]}),(0,n.jsx)(X,{sourceReady:g})]})},JoinGeo:function(e){var t,a;let{id:i}=e,[o,r]=(0,l.useState)("".concat(i,"JoinGeo")),[d,c]=(0,l.useState)([]),[u,f]=(0,l.useState)([]),[m,x]=(0,l.useState)(void 0),[v,p]=(0,l.useState)(void 0),[h,j]=(0,l.useState)(void 0),[g,y]=(0,l.useState)(void 0),[b,w]=(0,l.useState)(void 0),[S,C]=(0,l.useState)(void 0),{updateNodeData:N}=(0,s._K)(),R=(0,s.Vc)({type:"target",id:"left"}),T=(0,s.$P)(null===(t=R[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==T?void 0:null===(e=T.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&c((await t.getColumns()).map(e=>({value:e,label:e})))}()},[T]);let k=(0,s.Vc)({type:"target",id:"right"}),E=(0,s.$P)(null===(a=k[0])||void 0===a?void 0:a.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&f((await t.getColumns()).map(e=>({value:e,label:e})))}()},[E]);let[Z,A]=(0,l.useState)(""),[L,P]=(0,l.useState)(!1),[D,_]=(0,l.useState)(!1),[F,z]=(0,l.useState)(!1),[$,O]=(0,l.useState)(!1),[H,K]=(0,l.useState)(null),U=(0,s.$P)(i);return(0,l.useEffect)(()=>{(null==U?void 0:U.data.imported)&&("string"==typeof U.data.method&&j(U.data.method),"string"==typeof U.data.outputTable&&r(U.data.outputTable),"string"==typeof U.data.geoLeft&&x(U.data.geoLeft),"string"==typeof U.data.geoRight&&p(U.data.geoRight),"number"==typeof U.data.distance&&y(U.data.distance),"string"==typeof U.data.distanceMethod&&w(U.data.distanceMethod),"string"==typeof U.data.joinType&&C(U.data.joinType),Array.isArray(U.data.columnsLeft)&&c(U.data.columnsLeft),Array.isArray(U.data.columnsRight)&&f(U.data.columnsRight),U.data.imported=!1)},[U]),(0,l.useEffect)(()=>{(async function(){var e,t,a,n,l,s;let r=null==T?void 0:null===(e=T.data)||void 0===e?void 0:e.instance,c=null==E?void 0:null===(t=E.data)||void 0===t?void 0:t.instance;if(r instanceof es.Z&&z(!0),c instanceof es.Z&&O(!0),r instanceof es.Z&&c instanceof es.Z&&"string"==typeof m&&"string"==typeof v&&await r.hasColumn(m)&&await c.hasColumn(v)&&"string"==typeof h)try{P(!0);let e=null!==(l=null==T?void 0:null===(a=T.data)||void 0===a?void 0:a.originalTableName)&&void 0!==l?l:r.name,t=null!==(s=null==E?void 0:null===(n=E.data)||void 0===n?void 0:n.originalTableName)&&void 0!==s?s:c.name,f="const ".concat(o," = await ").concat(e,".joinGeo(").concat(t,', "').concat(h,'", {\n  leftTableColumn: "').concat(m,'",\n  rightTableColumn: "').concat(v,'",\n  distance: ').concat(g,",\n  distanceMethod: ").concat("string"==typeof b?'"'.concat(b,'"'):"undefined",',\n  type: "').concat(null!=S?S:"left",'",\n  outputTable: "').concat(o,'",\n})');A(f);let x=await r.joinGeo(c,h,{leftTableColumn:m,rightTableColumn:v,distance:g,distanceMethod:b,type:S,outputTable:o});N(i,{instance:x,originalTableName:o,code:f,method:h,outputTable:o,geoLeft:m,geoRight:v,distance:g,distanceMethod:b,joinType:S,columnsLeft:d,columnsRight:u}),K(null),P(!1),_(!0)}catch(e){console.error(e),K(e.message),P(!1),_(!0)}})()},[T,E,i,N,m,v,h,g,b,S,o,d,u]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-evenly -translate-x-[42%]",children:[(0,n.jsx)(W,{targetReady:F,id:"left"}),(0,n.jsx)(W,{targetReady:$,id:"right"})]}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:Z}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:L,children:"Join geo"}),(0,n.jsx)(J,{children:"Joins two tables based on geometries."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"Table name",value:o,onClick:e=>r(e)}),(0,n.jsx)(eR,{label:"Left geometries",placeholder:"Pick a column",items:d,onChange:e=>x(e),value:null!=m?m:""}),(0,n.jsx)(eR,{label:"Right geometries",placeholder:"Pick a column",items:u,onChange:e=>p(e),value:null!=v?v:""}),(0,n.jsx)(eR,{label:"Method:",placeholder:"Pick a method",value:null!=h?h:"",items:[{value:"intersect",label:"Intersect"},{value:"inside",label:"Inside"},{value:"within",label:"Within"}],onChange:e=>j(e)}),(0,n.jsx)(ek,{error:H}),(0,n.jsxs)(ef,{children:[(0,n.jsx)(eT,{label:"Distance (for method Within):",value:null!=g?g:0,set:y}),(0,n.jsx)(eR,{label:"Distance method (if Haversine or Spheroid, the distance unit is meter):",value:null!=b?b:"",items:[{value:"SRS",label:"SRS"},{value:"haversine",label:"Haversine"},{value:"spheroid",label:"Spheroid"}],onChange:e=>w(e)}),(0,n.jsx)(eR,{label:"Join type",value:null!=S?S:"",items:[{value:"left",label:"Left"},{value:"inner",label:"Inner"},{value:"full",label:"Full"},{value:"right",label:"right"}],onChange:e=>C(e)})]})]})]}),(0,n.jsx)(X,{sourceReady:D})]})},Summarize:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)("".concat(a,"Summarize")),[r,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),[f,m]=(0,l.useState)(["count"]),[x,v]=(0,l.useState)(2),[p,h]=(0,l.useState)([]),{updateNodeData:j}=(0,s._K)(),g=(0,s.Vc)({type:"target"}),y=(0,s.$P)(null===(t=g[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&h((await t.getColumns()).map(e=>({value:e,label:e})))}()},[y]);let[b,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[T,k]=(0,l.useState)(!1),[E,Z]=(0,l.useState)(null),A=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==A?void 0:A.data.imported)&&("string"==typeof A.data.outputTable&&o(A.data.outputTable),Array.isArray(A.data.values)&&d(A.data.values),Array.isArray(A.data.categories)&&u(A.data.categories),Array.isArray(A.data.summaries)&&m(A.data.summaries),"number"==typeof A.data.decimals&&v(A.data.decimals),Array.isArray(A.data.columns)&&h(A.data.columns),A.data.imported=!1)},[A]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&R(!0),l instanceof es.Z&&(null==r?void 0:r.length))try{C(!0);let e=await l.summarize({values:r,categories:c,summaries:f,decimals:x,outputTable:i}),s=null!==(n=null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(i," = await ").concat(s,".summarize({\n  values: ").concat(JSON.stringify(r),",\n  categories: ").concat(JSON.stringify(c),",\n  summaries: ").concat(JSON.stringify(f),",\n  decimals: ").concat(x,',\n  outputTable: "').concat(i,'",\n});');w(o),j(a,{instance:e,originalTableName:i,code:o,outputTable:i,values:r,categories:c,summaries:f,decimals:x,columns:p}),Z(null),C(!1),k(!0)}catch(e){console.error(e),Z(e.message),C(!1),k(!1)}})()},[y,a,j,r,c,f,x,i,p]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:N}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(V,{code:b}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:S,children:"Summarize"}),(0,n.jsx)(J,{children:"Aggregates the data."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"Table name",value:i,onClick:e=>o(e)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e$,{label:"Values",items:p,set:d,values:null!=r?r:[]}),(0,n.jsx)(e$,{label:"Categories",items:p,set:u,values:null!=c?c:[]}),(0,n.jsx)(e$,{label:"Summaries",items:[{value:"count",label:"Count"},{value:"countUnique",label:"Count uniques"},{value:"min",label:"Minimum"},{value:"max",label:"Maximum"},{value:"mean",label:"Mean"},{value:"median",label:"Median"},{value:"sum",label:"Sum"},{value:"skew",label:"Skew"},{value:"stdDev",label:"Standard deviation"},{value:"var",label:"Variance"}],values:null!=f?f:[],set:m}),(0,n.jsx)(eT,{label:"Decimals",value:x,set:v})]}),(0,n.jsx)(ek,{error:E})]})]}),(0,n.jsx)(X,{sourceReady:T})]})},RenameColumns:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)({}),[r,d]=(0,l.useState)([]),{updateNodeData:c}=(0,s._K)(),u=(0,s.Vc)({type:"target"}),f=(0,s.$P)(null===(t=u[0])||void 0===t?void 0:t.source),[m,x]=(0,l.useState)(!1),[v,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e;let t=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&d((await t.getColumns()).map(e=>({label:e,defaultValue:e})))}()},[f]);let[h,j]=(0,l.useState)(""),[g,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(null),S=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==S?void 0:S.data.imported)&&("object"==typeof S.data.columnsToRename&&o(S.data.columnsToRename),Array.isArray(S.data.columns)&&d(S.data.columns),S.data.imported=!1)},[S]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&x(!0),l instanceof es.Z)try{y(!0);let e=await l.cloneTable({outputTable:a});await e.renameColumns(i);let s=null!==(n=null==f?void 0:null===(t=f.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,".renameColumns(").concat(JSON.stringify(i),");");j(o),c(a,{instance:e,originalTableName:s,code:o,columnsToRename:i,columns:r}),w(null),y(!1),p(!0)}catch(e){console.error(e),w(e.message),y(!1),p(!1)}})()},[f,a,c,i,r]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:m}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:h}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:g,children:"Rename columns"}),(0,n.jsx)(J,{children:"Avoid spaces and special characters."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(eO,{items:r,values:i,setValues:o}),(0,n.jsx)(ek,{error:b})]})]}),(0,n.jsx)(X,{sourceReady:v})]})},Sort:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)("asc"),[c,u]=(0,l.useState)([]),{updateNodeData:f}=(0,s._K)(),m=(0,s.Vc)({type:"target"}),x=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source),[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){var e;let t=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&u((await t.getColumns()).map(e=>({value:e,label:e})))}()},[x]);let[g,y]=(0,l.useState)(""),[b,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null),N=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==N?void 0:N.data.imported)&&("string"==typeof N.data.columnToSort&&o(N.data.columnToSort),"string"==typeof N.data.order&&d(N.data.order),N.data.imported=!1)},[N]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&p(!0),l instanceof es.Z&&"string"==typeof i&&"string"==typeof r)try{w(!0);let e=await l.cloneTable({outputTable:a}),s={};s[i]=r,await e.sort(s);let o=null!==(n=null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,d="await ".concat(o,".sort(").concat(JSON.stringify(s),");");y(d),f(a,{instance:e,originalTableName:o,code:d,columnToSort:i,order:r}),C(null),w(!1),j(!0)}catch(e){console.error(e),C(e.message),w(!1),j(!1)}})()},[x,a,f,i,r]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:v}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:g}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:b,children:"Sort"}),(0,n.jsx)(J,{children:"Sort values in ascending or descending order."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(eR,{label:"Column",placeholder:"Pick a column",value:null!=i?i:"",onChange:e=>o(e),items:c}),(0,n.jsx)(eR,{label:"Order",value:r,onChange:e=>d(e),items:[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}]}),(0,n.jsx)(ek,{error:S})]})]}),(0,n.jsx)(X,{sourceReady:h})]})},AddColumn:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)("newColumn"),[r,d]=(0,l.useState)(void 0),[c,u]=(0,l.useState)(void 0),{updateNodeData:f}=(0,s._K)(),m=(0,s.Vc)({type:"target"}),x=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source),[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(""),[b,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null),N=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==N?void 0:N.data.imported)&&("string"==typeof N.data.newColumn&&o(N.data.newColumn),"string"==typeof N.data.dataType&&d(N.data.dataType),"string"==typeof N.data.definition&&u(N.data.definition),N.data.imported=!1)},[N]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&p(!0),l instanceof es.Z&&"string"==typeof i&&"string"==typeof r&&"string"==typeof c)try{w(!0);let e=await l.cloneTable({outputTable:a});await e.addColumn(i,r,c);let s=null!==(n=null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,'.addColumn("').concat(i,'", "').concat(r,'", `').concat(c,"`);");y(o),f(a,{instance:e,originalTableName:s,code:o,newColumn:i,dataType:r,definition:c}),C(null),w(!1),j(!0)}catch(e){console.error(e),C(e.message),w(!1),j(!1)}})()},[x,a,f,i,r,c]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:v}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:g}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:b,children:"Add column"}),(0,n.jsx)(J,{children:"Adds a column into the table. The definition is in SQL."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"New column",value:i,onClick:e=>o(e)}),(0,n.jsx)(eR,{label:"Data type",value:null!=r?r:"",items:[{value:"string",label:"Text"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"},{value:"geometry",label:"Geometry"}],onChange:e=>d(e)}),(0,n.jsx)(eY,{label:"Definition",set:u,value:null!=c?c:""}),(0,n.jsx)(ek,{error:S})]})]}),(0,n.jsx)(X,{sourceReady:h})]})},Filter:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),{updateNodeData:r}=(0,s._K)(),d=(0,s.Vc)({type:"target"}),c=(0,s.$P)(null===(t=d[0])||void 0===t?void 0:t.source),[u,f]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[v,p]=(0,l.useState)(""),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(null),b=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==b?void 0:b.data.imported)&&("string"==typeof b.data.definition&&o(b.data.definition),b.data.imported=!1)},[b]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&f(!0),l instanceof es.Z&&"string"==typeof i)try{j(!0);let e=await l.cloneTable({outputTable:a});await e.filter(i);let s=null!==(n=null==c?void 0:null===(t=c.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,".filter(`").concat(i,"`);");p(o),r(a,{instance:e,originalTableName:s,code:o,definition:i}),y(null),j(!1),x(!0)}catch(e){console.error(e),y(e.message),j(!1),x(!1)}})()},[c,a,r,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:u}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:v}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:h,children:"Filter"}),(0,n.jsx)(J,{children:"Filter rows in the table. The condition is in SQL."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(eY,{label:"Condition",set:o,value:null!=i?i:""}),(0,n.jsx)(ek,{error:g})]})]}),(0,n.jsx)(X,{sourceReady:m})]})},Join:function(e){var t,a;let{id:i}=e,[o,r]=(0,l.useState)("".concat(i,"Join")),[d,c]=(0,l.useState)([]),[u,f]=(0,l.useState)(void 0),[m,x]=(0,l.useState)(void 0),{updateNodeData:v}=(0,s._K)(),p=(0,s.Vc)({type:"target",id:"left"}),h=(0,s.$P)(null===(t=p[0])||void 0===t?void 0:t.source),j=(0,s.Vc)({type:"target",id:"right"}),g=(0,s.$P)(null===(a=j[0])||void 0===a?void 0:a.source);(0,l.useEffect)(()=>{!async function(){var e,t;let a=null==h?void 0:null===(e=h.data)||void 0===e?void 0:e.instance,n=null==g?void 0:null===(t=g.data)||void 0===t?void 0:t.instance;if(a instanceof es.Z&&n instanceof es.Z){let e=await a.getColumns(),t=await n.getColumns(),l=[];for(let a of e){let e=t.find(e=>e===a);e&&l.push(e)}c(l.map(e=>({value:e,label:e})))}}()},[h,g]);let[y,b]=(0,l.useState)(""),[w,S]=(0,l.useState)(!1),[C,N]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1),[Z,A]=(0,l.useState)(null),L=(0,s.$P)(i);return(0,l.useEffect)(()=>{(null==L?void 0:L.data.imported)&&("string"==typeof L.data.commonColumn&&f(L.data.commonColumn),Array.isArray(L.data.commonColumns)&&c(L.data.commonColumns),"string"==typeof L.data.joinType&&x(L.data.joinType),"string"==typeof L.data.outputTable&&r(L.data.outputTable),L.data.imported=!1)},[L]),(0,l.useEffect)(()=>{(async function(){1===d.length&&f(d[0].value)})()},[d]),(0,l.useEffect)(()=>{(async function(){var e,t,a,n,l,s;let r=null==h?void 0:null===(e=h.data)||void 0===e?void 0:e.instance,c=null==g?void 0:null===(t=g.data)||void 0===t?void 0:t.instance;if(r instanceof es.Z&&T(!0),c instanceof es.Z&&E(!0),r instanceof es.Z&&c instanceof es.Z&&"string"==typeof u)try{S(!0);let e=await r.join(c,{commonColumn:u,type:m,outputTable:o}),t=null!==(l=null==h?void 0:null===(a=h.data)||void 0===a?void 0:a.originalTableName)&&void 0!==l?l:r.name,f=null!==(s=null==g?void 0:null===(n=g.data)||void 0===n?void 0:n.originalTableName)&&void 0!==s?s:c.name,x="const ".concat(o," = await ").concat(t,".join(").concat(f,', {\n  commonColumn: "').concat(u,'",\n  type: "').concat(null!=m?m:"left",'",\n  outputTable: "').concat(o,'",\n})');b(x),v(i,{instance:e,originalTableName:o,code:x,commonColumn:u,commonColumns:d,joinType:m,outputTable:o}),A(null),S(!1),N(!0)}catch(e){console.error(e),A(e.message),S(!1),N(!0)}})()},[h,g,i,v,u,d,m,o]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-evenly -translate-x-[42%]",children:[(0,n.jsx)(W,{targetReady:R,id:"left"}),(0,n.jsx)(W,{targetReady:k,id:"right"})]}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:y}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:w,children:"Join"}),(0,n.jsx)(J,{children:"Joins two tables based on a common column."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"Table name",value:o,onClick:e=>r(e)}),(0,n.jsx)(eR,{label:"Common column",placeholder:"Pick a column",items:d,onChange:e=>f(e),value:null!=u?u:""}),(0,n.jsx)(ek,{error:Z}),(0,n.jsx)(ef,{children:(0,n.jsx)(eR,{label:"Join type",value:null!=m?m:"",items:[{value:"left",label:"Left"},{value:"inner",label:"Inner"},{value:"full",label:"Full"},{value:"right",label:"right"}],onChange:e=>x(e)})})]})]}),(0,n.jsx)(X,{sourceReady:C})]})},LinearRegressions:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)("".concat(a,"LinearRegression")),[r,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),[f,m]=(0,l.useState)(void 0),[x,v]=(0,l.useState)(2),[p,h]=(0,l.useState)([]),{updateNodeData:j}=(0,s._K)(),g=(0,s.Vc)({type:"target"}),y=(0,s.$P)(null===(t=g[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&h((await t.getColumns()).map(e=>({value:e,label:e})))}()},[y]);let[b,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[T,k]=(0,l.useState)(!1),[E,Z]=(0,l.useState)(null),A=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==A?void 0:A.data.imported)&&("string"==typeof A.data.x&&d(A.data.x),"string"==typeof A.data.y&&u(A.data.y),Array.isArray(A.data.categories)&&m(A.data.categories),"number"==typeof A.data.decimals&&v(A.data.decimals),"string"==typeof A.data.outputTable&&o(A.data.outputTable),Array.isArray(A.data.columns)&&h(A.data.columns),A.data.imported=!1)},[A]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&R(!0),l instanceof es.Z&&"string"==typeof r&&"string"==typeof c)try{C(!0);let e=await l.linearRegressions({x:r,y:c,categories:f,decimals:x,outputTable:i}),s=null!==(n=null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(i," = await ").concat(s,'.linearRegressions({\n  x: "').concat(r,'",\n  y: "').concat(c,'",\n  categories: ').concat(JSON.stringify(f),",\n  decimals: ").concat(x,',\n  outputTable: "').concat(i,'",\n});');w(o),j(a,{instance:e,originalTableName:i,code:o,x:r,y:c,categories:f,decimals:x,outputTable:i,columns:p}),Z(null),C(!1),k(!0)}catch(e){console.error(e),Z(e.message),C(!1),k(!1)}})()},[y,a,j,r,c,f,x,i,p]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:N}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(V,{code:b}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:S,children:"Linear regressions"}),(0,n.jsx)(J,{children:"The results include the slope, the y-intercept the R-squared."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(el,{label:"Table name",value:i,onClick:e=>o(e)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eR,{label:"X",items:p,placeholder:"Pick a column",value:null!=r?r:"",onChange:e=>d(e)}),(0,n.jsx)(eR,{label:"Y",items:p,placeholder:"Pick a column",value:null!=c?c:"",onChange:e=>u(e)}),(0,n.jsx)(e$,{label:"Categories",items:p,values:null!=f?f:[],set:m}),(0,n.jsx)(eT,{label:"Decimals",value:x,set:v})]}),(0,n.jsx)(ek,{error:E})]})]}),(0,n.jsx)(X,{sourceReady:T})]})},Note:function(e){let{id:t}=e,[a,i]=(0,l.useState)(void 0),[o,r]=(0,l.useState)(void 0),{updateNodeData:d}=(0,s._K)(),c=(0,s.$P)(t);return(0,l.useEffect)(()=>{(null==c?void 0:c.data.imported)&&("string"==typeof c.data.text&&i(c.data.text),c.data.imported=!1)},[c]),(0,l.useEffect)(()=>{(async function(){d(t,{text:o})})()},[o,t,d]),(0,n.jsx)("div",{children:(0,n.jsx)(M,{children:(0,n.jsx)(eM,{className:"w-96 h-48 text-pink-500 text-md",value:null!=o?o:a,onChange:e=>r(e.target.value)})})})},SelectColumns:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(),[r,d]=(0,l.useState)([]),{updateNodeData:c}=(0,s._K)(),u=(0,s.Vc)({type:"target"}),f=(0,s.$P)(null===(t=u[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&d((await t.getColumns()).map(e=>({value:e,label:e})))}()},[f]);let[m,x]=(0,l.useState)(""),[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(null),S=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==S?void 0:S.data.imported)&&(Array.isArray(S.data.selectedColumns)&&o(S.data.selectedColumns),Array.isArray(S.data.columns)&&d(S.data.columns),S.data.imported=!1)},[S]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==f?void 0:null===(e=f.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&j(!0),l instanceof es.Z&&(null==i?void 0:i.length))try{p(!0);let e=await l.cloneTable({outputTable:a});await e.selectColumns(i);let s=null!==(n=null==f?void 0:null===(t=f.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(s," = await ").concat(s,".selectColumns(").concat(JSON.stringify(i),");");x(o),c(a,{instance:e,originalTableName:s,code:o,selectedColumns:i,columns:r}),w(null),p(!1),y(!0)}catch(e){console.error(e),w(e.message),p(!1),y(!1)}})()},[f,a,c,i,r]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:h}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(V,{code:m}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:v,children:"Select columns"}),(0,n.jsx)(J,{children:"Selects columns in a table"})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(e$,{label:"Columns",items:r,set:o,values:null!=i?i:[]}),(0,n.jsx)(ek,{error:b})]})]}),(0,n.jsx)(X,{sourceReady:g})]})},Longer:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)(void 0),[c,u]=(0,l.useState)(),[f,m]=(0,l.useState)([]),{updateNodeData:x}=(0,s._K)(),v=(0,s.Vc)({type:"target"}),p=(0,s.$P)(null===(t=v[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&m((await t.getColumns()).map(e=>({value:e,label:e})))}()},[p]);let[h,j]=(0,l.useState)(""),[g,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(null),T=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==T?void 0:T.data.imported)&&(Array.isArray(T.data.selectedColumns)&&u(T.data.selectedColumns),"string"==typeof T.data.columnsTo&&o(T.data.columnsTo),"string"==typeof T.data.valuesTo&&d(T.data.valuesTo),Array.isArray(T.data.columns)&&m(T.data.columns),T.data.imported=!1)},[T]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&w(!0),l instanceof es.Z&&(null==c?void 0:c.length)&&"string"==typeof i&&"string"==typeof r)try{y(!0);let e=await l.cloneTable({outputTable:a});await e.longer(c,i,r);let s=null!==(n=null==p?void 0:null===(t=p.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(s," = await ").concat(s,".longer(").concat(JSON.stringify(c),', "').concat(i,'", "').concat(r,'");');j(o),x(a,{instance:e,originalTableName:s,code:o,selectedColumns:c,columnsTo:i,valuesTo:r,columns:f}),R(null),y(!1),C(!0)}catch(e){console.error(e),R(e.message),y(!1),C(!1)}})()},[p,a,x,c,i,r,f]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:b}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(V,{code:h}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:g,children:"Longer"}),(0,n.jsx)(J,{children:"Restructures a table by stacking values. Useful to tidy up data."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(e$,{label:"Columns",items:f,set:u,values:null!=c?c:[]}),(0,n.jsx)(el,{label:"New column for column names",value:null!=i?i:"",onClick:e=>o(e)}),(0,n.jsx)(el,{label:"New column for values",value:null!=r?r:"",onClick:e=>d(e)}),(0,n.jsx)(ek,{error:N})]})]}),(0,n.jsx)(X,{sourceReady:S})]})},Wider:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)(void 0),[c,u]=(0,l.useState)([]),{updateNodeData:f}=(0,s._K)(),m=(0,s.Vc)({type:"target"}),x=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&u((await t.getColumns()).map(e=>({value:e,label:e})))}()},[x]);let[v,p]=(0,l.useState)(""),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null),N=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==N?void 0:N.data.imported)&&("string"==typeof N.data.columnsFrom&&o(N.data.columnsFrom),"string"==typeof N.data.valuesFrom&&d(N.data.valuesFrom),N.data.imported=!1)},[N]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&y(!0),l instanceof es.Z&&"string"==typeof i&&"string"==typeof r)try{j(!0);let e=await l.cloneTable({outputTable:a});await e.wider(i,r);let s=null!==(n=null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="const ".concat(s," = await ").concat(s,'.wider("').concat(i,'", "').concat(r,'");');p(o),f(a,{instance:e,originalTableName:s,code:o,columnsFrom:i,valuesFrom:r,columns:c}),C(null),j(!1),w(!0)}catch(e){console.error(e),C(e.message),j(!1),w(!1)}})()},[x,a,f,i,r,c]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:g}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(V,{code:v}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:h,children:"Wider"}),(0,n.jsx)(J,{children:"Restructures a table by unstacking values."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(eR,{label:"Column names from",placeholder:"Pick a column",items:c,value:null!=i?i:"",onChange:e=>o(e)}),(0,n.jsx)(eR,{label:"Values from",placeholder:"Pick a column",items:c,value:null!=r?r:"",onChange:e=>d(e)}),(0,n.jsx)(ek,{error:S})]})]}),(0,n.jsx)(X,{sourceReady:b})]})},CleanColumnNames:function(e){var t;let{id:a}=e,{updateNodeData:i}=(0,s._K)(),o=(0,s.Vc)({type:"target"}),r=(0,s.$P)(null===(t=o[0])||void 0===t?void 0:t.source),[d,c]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1),[m,x]=(0,l.useState)(""),[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&c(!0),l instanceof es.Z)try{p(!0);let e=await l.cloneTable({outputTable:a});await e.cleanColumnNames();let s=null!==(n=null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,".cleanColumnNames();");x(o),i(a,{instance:e,originalTableName:s,code:o}),j(null),p(!1),f(!0)}catch(e){console.error(e),j(e.message),p(!1),f(!1)}})()},[r,a,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:d}),(0,n.jsxs)(M,{className:"max-w-80",children:[(0,n.jsx)(V,{code:m}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:v,children:"Clean column names"}),(0,n.jsx)(J,{children:"Removes special characters and spaces from column names."})]}),(0,n.jsx)(B,{children:(0,n.jsx)(ek,{error:h})})]}),(0,n.jsx)(X,{sourceReady:u})]})},Describe:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)(null),[c,u]=(0,l.useState)(null),f=(0,s.Vc)({type:"target"}),m=(0,s.$P)(null===(t=f[0])||void 0===t?void 0:t.source),[x,v]=(0,l.useState)(!1),[p,h]=(0,l.useState)(""),[j,g]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async function(){var e,t,a;let n=null==m?void 0:null===(e=m.data)||void 0===e?void 0:e.instance;if(n instanceof es.Z){v(!0),g(!0);let e=await n.getDescription();d(e),u(Object.keys(e[0]));let l=null!==(a=null==m?void 0:null===(t=m.data)||void 0===t?void 0:t.originalTableName)&&void 0!==a?a:n.name;o(l),h("await ".concat(l,".logDescription()")),g(!1)}else d(null),u(null)})()},[m,a]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:x}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:p}),(0,n.jsxs)(Y,{children:[(0,n.jsxs)(I,{loader:j,children:["Describe","string"==typeof i?" ".concat(i):""]}),(0,n.jsx)(J,{children:"Returns details like data types, number of null and distinct values."})]}),Array.isArray(r)&&Array.isArray(c)&&(0,n.jsx)(B,{children:(0,n.jsx)(e_,{data:r,columns:c})})]})]})},ProportionsVertical:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)(void 0),[c,u]=(0,l.useState)(void 0),[f,m]=(0,l.useState)(2),[x,v]=(0,l.useState)([]),{updateNodeData:p}=(0,s._K)(),h=(0,s.Vc)({type:"target"}),j=(0,s.$P)(null===(t=h[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==j?void 0:null===(e=j.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&v((await t.getColumns()).map(e=>({value:e,label:e})))}()},[j]);let[g,y]=(0,l.useState)(""),[b,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[T,k]=(0,l.useState)(null),E=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==E?void 0:E.data.imported)&&("string"==typeof E.data.column&&o(E.data.column),"string"==typeof E.data.newColumn&&d(E.data.newColumn),Array.isArray(E.data.categories)&&u(E.data.categories),"number"==typeof E.data.decimals&&m(E.data.decimals),Array.isArray(E.data.columns)&&v(E.data.columns),E.data.imported=!1)},[E]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==j?void 0:null===(e=j.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&C(!0),l instanceof es.Z&&"string"==typeof i&&"string"==typeof r)try{w(!0);let e=await l.cloneTable({outputTable:a});await e.proportionsVertical(i,r,{categories:c,decimals:f});let s=null!==(n=null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,'.proportionsVertical("').concat(i,'", "').concat(r,'", {\n  categories: ').concat(JSON.stringify(c),",\n  decimals: ").concat(f,",\n});");y(o),p(a,{instance:e,originalTableName:s,code:o,column:i,newColumn:r,categories:c,decimals:f,columns:x}),k(null),w(!1),R(!0)}catch(e){console.error(e),k(e.message),w(!1),R(!1)}})()},[j,a,p,i,r,c,f,x]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:S}),(0,n.jsxs)(M,{className:"min-w-60 max-w-md",children:[(0,n.jsx)(V,{code:g}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:b,children:"Proportions vertical"}),(0,n.jsx)(J,{children:"Computes the proportions in a column."})]}),(0,n.jsxs)(B,{children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eR,{label:"Column",items:x,placeholder:"Pick a column",value:null!=i?i:"",onChange:e=>o(e)}),(0,n.jsx)(el,{label:"New column",value:null!=r?r:"",onClick:e=>d(e)}),(0,n.jsx)(e$,{label:"Categories",items:x,values:null!=c?c:[],set:u}),(0,n.jsx)(eT,{label:"Decimals",value:f,set:m})]}),(0,n.jsx)(ek,{error:T})]})]}),(0,n.jsx)(X,{sourceReady:N})]})},RemoveDuplicates:function(e){var t;let{id:a}=e,{updateNodeData:i}=(0,s._K)(),o=(0,s.Vc)({type:"target"}),r=(0,s.$P)(null===(t=o[0])||void 0===t?void 0:t.source),[d,c]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1),[m,x]=(0,l.useState)(""),[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&c(!0),l instanceof es.Z)try{p(!0);let e=await l.cloneTable({outputTable:a});await e.removeDuplicates();let s=null!==(n=null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,".removeDuplicates();");x(o),i(a,{instance:e,originalTableName:s,code:o}),j(null),p(!1),f(!0)}catch(e){console.error(e),j(e.message),p(!1),f(!1)}})()},[r,a,i]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:d}),(0,n.jsxs)(M,{className:"max-w-80",children:[(0,n.jsx)(V,{code:m}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:v,children:"Remove duplicates"}),(0,n.jsx)(J,{children:"Removes duplicate rows from this table, keeping unique rows. The data might be returned in a different order than the original."})]}),(0,n.jsx)(B,{children:(0,n.jsx)(ek,{error:h})})]}),(0,n.jsx)(X,{sourceReady:u})]})},UpdateColumn:function(e){var t;let{id:a}=e,[i,o]=(0,l.useState)(void 0),[r,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(void 0),{updateNodeData:f}=(0,s._K)(),m=(0,s.Vc)({type:"target"}),x=(0,s.$P)(null===(t=m[0])||void 0===t?void 0:t.source);(0,l.useEffect)(()=>{!async function(){var e;let t=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;t instanceof es.Z&&d((await t.getColumns()).map(e=>({value:e,label:e})))}()},[x]);let[v,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(""),[b,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null),N=(0,s.$P)(a);return(0,l.useEffect)(()=>{(null==N?void 0:N.data.imported)&&("string"==typeof N.data.column&&o(N.data.column),Array.isArray(N.data.columns)&&d(N.data.columns),"string"==typeof N.data.definition&&u(N.data.definition),N.data.imported=!1)},[N]),(0,l.useEffect)(()=>{(async function(){var e,t,n;let l=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.instance;if(l instanceof es.Z&&p(!0),l instanceof es.Z&&"string"==typeof i&&"string"==typeof c)try{w(!0);let e=await l.cloneTable({outputTable:a});await e.updateColumn(i,c);let s=null!==(n=null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.originalTableName)&&void 0!==n?n:l.name,o="await ".concat(s,'.updateColumn("').concat(i,'", `').concat(c,"`);");y(o),f(a,{instance:e,originalTableName:s,code:o,column:i,definition:c,columns:r}),C(null),w(!1),j(!0)}catch(e){console.error(e),C(e.message),w(!1),j(!1)}})()},[x,a,f,c,i,r]),(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{targetReady:v}),(0,n.jsxs)(M,{children:[(0,n.jsx)(V,{code:g}),(0,n.jsxs)(Y,{children:[(0,n.jsx)(I,{loader:b,children:"Update column"}),(0,n.jsx)(J,{children:"Update the values in a column. The definition is in SQL."})]}),(0,n.jsxs)(B,{children:[(0,n.jsx)(eR,{label:"Column",placeholder:"Pick a column",items:r,value:null!=i?i:"",onChange:e=>o(e)}),(0,n.jsx)(eY,{label:"Definition",set:u,value:null!=c?c:""}),(0,n.jsx)(ek,{error:S})]})]}),(0,n.jsx)(X,{sourceReady:h})]})}},eB=a(92005);let eK=eB.v2;eB.ZA,eB.h_,eB.Tr,eB.Ee;let eX=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eB.fC,{ref:t,className:m("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",a),...l})});eX.displayName=eB.fC.displayName;let eU=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eB.xz,{ref:t,className:m("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a),...l})});eU.displayName=eB.xz.displayName,l.forwardRef((e,t)=>{let{className:a,inset:l,children:s,...i}=e;return(0,n.jsxs)(eB.fF,{ref:t,className:m("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",l&&"pl-8",a),...i,children:[s,(0,n.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=eB.fF.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eB.tu,{ref:t,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=eB.tu.displayName;let eG=l.forwardRef((e,t)=>{let{className:a,align:l="start",alignOffset:s=-4,sideOffset:i=8,...o}=e;return(0,n.jsx)(eB.h_,{children:(0,n.jsx)(eB.VY,{ref:t,align:l,alignOffset:s,sideOffset:i,className:m("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});eG.displayName=eB.VY.displayName;let eq=l.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,n.jsx)(eB.ck,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...s})});function eI(e){let{rfInstance:t,setNodes:a,setEdges:s}=e,o=(0,l.useRef)(null),r=(0,l.useCallback)(async e=>{let n=e.target.files;if(n){let e=JSON.parse(await n[0].text()),l=e.nodes.map(e=>({...e,data:{...e.data,imported:!0}}));a(l||[]),s(e.edges||[]);let o=(0,i.RX)(l);null==t||t.fitBounds(o,{padding:0})}},[t,s,a]),d=(0,l.useCallback)(async e=>{let n=await fetch(e),l=await n.json(),o=l.nodes.map(e=>({...e,data:{...e.data,imported:!0}}));a(o||[]),s(l.edges||[]);let r=(0,i.RX)(o);null==t||t.fitBounds(r,{padding:0})},[t,s,a]),c=(0,l.useCallback)(()=>{if(t){let e=JSON.stringify(t.toObject()),a=document.createElement("a"),n=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download="sda-flow.json",a.click()}},[t]);return(0,n.jsx)("div",{className:"z-10",children:(0,n.jsxs)(eX,{className:"absolute w-fit m-2",children:[(0,n.jsx)(eK,{children:(0,n.jsxs)(eU,{onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.click()},className:"cursor-pointer",children:["Import"," ",(0,n.jsx)(Q,{className:"hidden",ref:o,type:"file",onChange:r})]})}),(0,n.jsx)(eK,{children:(0,n.jsx)(eU,{className:"cursor-pointer",onClick:()=>c(),children:"Save"})}),(0,n.jsxs)(eK,{children:[(0,n.jsx)(eU,{children:"Examples"}),(0,n.jsxs)(eG,{children:[(0,n.jsx)(eq,{onClick:()=>d("/simple-data-analysis-flow/flow-examples/climate-trends.json"),children:"Climate trends"}),(0,n.jsx)(eq,{onClick:()=>d("/simple-data-analysis-flow/flow-examples/fires-in-canada.json"),children:"Fires in Canada"})]})]})]})})}function eW(){let[e,t]=(0,l.useState)(),[a,o]=(0,l.useState)("0");(0,l.useEffect)(()=>{function e(){let e=document.querySelector("#header");if(e){let t=e.getBoundingClientRect();o("".concat(window.innerHeight-t.height,"px"))}}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let[r,d,c]=(0,s.Rr)($),[u,f,m]=(0,s.ll)(O),x=(0,l.useCallback)(e=>f(t=>(0,i.Z_)(e,t.filter(t=>t.targetHandle&&e.targetHandle?t.target!==e.target||t.targetHandle!==e.targetHandle:t.target!==e.target))),[f]);return"0"!==a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eI,{rfInstance:e,setNodes:d,setEdges:f}),(0,n.jsx)(_,{}),(0,n.jsx)(S,{setNodes:d,children:(0,n.jsx)("div",{style:{width:"100vw",height:a},children:(0,n.jsxs)(s.x$,{nodes:r,edges:u,onNodesChange:c,onEdgesChange:m,onConnect:x,nodeTypes:eJ,fitView:!0,fitViewOptions:{padding:.1},minZoom:.25,defaultEdgeOptions:{type:"smoothstep",markerEnd:{type:i.QZ.Arrow,width:20,height:20}},connectionRadius:50,connectionLineType:i.t8.SmoothStep,onInit:t,children:[(0,n.jsx)(s.ZX,{}),(0,n.jsx)(s.Aq,{variant:s.T7.Dots,gap:12,size:1})]})})})]})}eq.displayName=eB.ck.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:s,...i}=e;return(0,n.jsxs)(eB.oC,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(eB.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),l]})}).displayName=eB.oC.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(eB.Rk,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(eB.wU,{children:(0,n.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=eB.Rk.displayName,l.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,n.jsx)(eB.__,{ref:t,className:m("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...s})}).displayName=eB.__.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eB.Z0,{ref:t,className:m("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=eB.Z0.displayName}},function(e){e.O(0,[3545,8319,3067,7283,2971,7023,1744],function(){return e(e.s=88874)}),_N_E=e.O()}]);