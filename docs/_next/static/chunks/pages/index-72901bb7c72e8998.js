(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(8692)}])},8692:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return L}});var d=c(5893),e=c(7294),f=c(9647),g=c(5362),h=c(4622),i=c(1799),j=c(9396),k=c(797),l=c(6902),m=c(5892),n=c(6703),o=[{id:"0",type:"newSimpleData",data:{simpleData:new n.P},position:{x:0,y:0}}],p=[],q=(0,l.ZP)(function(a,b){return{nodes:o,edges:p,onNodesChange:function(c){var d=c.filter(function(a){return"remove"===a.type}).map(function(a){return a.id}),e=!0,f=!1,g=void 0;try{for(var h,i=d[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;b().updateNodeSimpleData(j,null)}}catch(k){f=!0,g=k}finally{try{e||null==i.return||i.return()}finally{if(f)throw g}}a({nodes:(0,m.y)(c,b().nodes)})},onEdgesChange:function(c){if(a({edges:(0,m.z)(c,b().edges)}),1===c.length&&"remove"===c[0].type){var d=c[0].id.split("-")[2].replace(/\D+/g,"");a({nodes:b().nodes.map(function(a){return a.id===d&&(a.data=(0,j.Z)((0,i.Z)({},a.data),{sourceSimpleData:null})),a})})}},onConnect:function(c){var d,e=b().nodes,f=null===(d=e.find(function(a){return a.id===c.source}))|| void 0===d?void 0:d.data.simpleData;a({edges:(0,m.c)(c,b().edges),nodes:e.map(function(a){return a.id===c.target&&(a.data=(0,j.Z)((0,i.Z)({},a.data),{sourceSimpleData:f?f.clone():null})),a})})},addCustomNode:function(c){var d=b().nodes,e=d[d.length-1];a({nodes:(0,k.Z)(d).concat([{id:c,type:"simpleDataMethod",data:{sourceSimpleData:null,simpleData:null},position:{x:e.position.x,y:e.position.y+e.height+20}}])})},updateNodeSimpleData:function(c,d){var e=b().nodes.map(function(a){return a.id===c&&(a.data=(0,j.Z)((0,i.Z)({},a.data),{simpleData:d})),a}),f=b().edges.filter(function(a){return a.source===c}).map(function(a){return a.target});e.map(function(a){return f.includes(a.id)&&(a.data=(0,j.Z)((0,i.Z)({},a.data),{sourceSimpleData:d})),a}),a({nodes:e})}}}),r=q,s=c(7568),t=c(4051),u=c.n(t),v=c(2882),w=c(4011),x=c(7906),y=c(3184),z=c(3816),A=c(7196),B=c(295),C={fontSize:"10px",padding:"5px"};function D(a){var b=a.keys,c=a.data;return(0,d.jsx)(v.Z,{component:w.Z,sx:{marginTop:"10px"},children:(0,d.jsxs)(x.Z,{size:"small",children:[(0,d.jsx)(y.Z,{children:(0,d.jsx)(z.Z,{children:b.map(function(a){return(0,d.jsx)(A.Z,{sx:(0,j.Z)((0,i.Z)({},C),{fontWeight:"bold"}),children:a},a)})})}),(0,d.jsx)(B.Z,{children:c.map(function(a,c){return(0,d.jsx)(z.Z,{children:b.map(function(b,e){return(0,d.jsx)(A.Z,{sx:C,children:String(a[b])},"tc-"+c+"-"+e)})},"tb-"+c)})})]})})}function E(a){var b=a.id,c=a.method,e=a.generateArgId,f=a.updateArgs,g=a.d,h=a.i,i=a.simpleData;return(0,d.jsx)("select",{id:e(b,h,c),onChange:function(){return f()},defaultValue:g.defaultValue,children:i?[void 0].concat((0,k.Z)(i.getKeys())).map(function(a,b){return(0,d.jsx)("option",{children:a},"".concat(c,"-option-").concat(b))}):null})}function F(a){var b=a.id,c=a.method,e=a.generateArgId,f=a.updateArgs,g=a.d,h=a.i,i=a.simpleData;return(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:i?i.getKeys().map(function(a,i){return(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",border:"1px solid grey",borderRadius:5,padding:"5px 5px",margin:3},children:[(0,d.jsx)("div",{children:a}),(0,d.jsx)("input",{type:"checkbox",className:e(b,h,c),onChange:function(){return f()},style:{marginBottom:0},defaultChecked:g.defaultValue,value:a})]},"".concat(b,"-").concat(c,"-arg").concat(h,"-multipleKeys").concat(i))}):null})}var G={loadDataFromUrl:{arguments:[{name:"url",type:"text",optional:!1},{name:"autoType",type:"checkbox",defaultValue:!1}]},formatAllKeys:{arguments:[]},selectKeys:{arguments:[{name:"keys",type:"multipleKeys",optional:!1}]},removeDuplicates:{arguments:[]},summarize:{arguments:[{name:"keyValue",type:"keys",defaultValue:void 0},{name:"keyCategory",type:"keys",defaultValue:void 0},{name:"summary",type:"select",defaultValue:void 0,options:[void 0,"count","min","max","sum","mean","median","deviation"]}]},excludeMissingValues:{arguments:[]},getChart:{justClone:!0,htmlOutput:!0,arguments:[{name:"x",type:"keys",defaultValue:void 0,optional:!1},{name:"y",type:"keys",defaultValue:void 0,optional:!1},{name:"type",type:"select",defaultValue:void 0,options:[void 0,"dot","line","bar","barVertical","barHorizontal","box","boxVertical","boxHorizontal"],optional:!1},{name:"color",type:"keys",defaultValue:void 0},{name:"marginLeft",type:"number",defaultValue:void 0}]},describe:{arguments:[]},showTable:{justClone:!0,arguments:[{name:"nbItemsInTable",type:"text",defaultValue:5}]}},H=c(5923),I={i8:"0.1.0"},J={newSimpleData:function(a){var b=a.id,c=(0,e.useState)(!1),g=c[0],h=c[1],i=(0,e.useState)(null),j=i[0],k=i[1],l=(0,e.useRef)();(0,e.useEffect)(function(){g||o(b,new n.P)},[g]);var o=r(function(a){return a.updateNodeSimpleData});return(0,d.jsxs)("div",{style:{backgroundColor:"white",border:"1px solid black",borderRadius:5,padding:10},children:[(0,d.jsx)("div",{style:{fontWeight:"bold",textAlign:"center",marginBottom:10},children:"New SimpleData"}),(0,d.jsx)("button",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},onClick:function(){return h(!g)},children:"Add data manually"}),g?(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:10},children:(0,d.jsx)("input",{ref:l,style:{width:200,textAlign:"center"},placeholder:"Paste a JSON array of objects",onChange:function(){try{o(b,new n.P({data:JSON.parse(l.current.value)})),k(null)}catch(a){k("Error: ".concat(a.message))}}})}):null,j?(0,d.jsx)("div",{style:{maxWidth:200,color:"red",marginTop:10},children:j}):null,(0,d.jsx)(f.HH,{type:"source",position:m.P.Bottom,id:"a"})]})},simpleDataMethod:function(a){var b=a.id,c=a.data,g=(0,e.useState)(""),h=g[0],i=g[1],j=(0,e.useState)({}),k=j[0],l=j[1],n=(0,e.useState)(null),o=n[0],p=n[1],q=(0,e.useState)(null),t=q[0],v=q[1],w=(0,e.useCallback)(function(a,b,c){return"node".concat(a,"method").concat(c,"Arg").concat(b)},[]),x=r(function(a){return a.updateNodeSimpleData}),y=(0,e.useCallback)(function(){var a={};if(G[h]){for(var c=0;c<G[h].arguments.length;c++)if(["text","number","keys","select"].includes(G[h].arguments[c].type)){var d=document.querySelector("#".concat(w(b,c,h))).value;"number"===G[h].arguments[c].type&&(d=parseInt(d)),a[G[h].arguments[c].name]=""===d?void 0:d}else"checkbox"===G[h].arguments[c].type?a[G[h].arguments[c].name]=document.querySelector("#".concat(w(b,c,h))).checked:"multipleKeys"===G[h].arguments[c].type&&(a[G[h].arguments[c].name]=Array.from(document.querySelectorAll(".".concat(w(b,c,h)))).filter(function(a){return a.checked}).map(function(a){return a.value}));l(a)}else l({})},[h]);return(0,e.useEffect)(function(){a.apply(this,arguments);function a(){return(a=(0,s.Z)(u().mark(function a(){var d,e,f,g,i,j,l,m;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(["","Choose a method"].includes(h)){a.next=57;break}if(d=!1,0!==G[h].arguments.filter(function(a){return!1===a.optional}).length){a.next=6;break}d=!0,a.next=34;break;case 6:e=!0,f=!1,g=void 0,a.prev=7,i=G[h].arguments.filter(function(a){return!1===a.optional})[Symbol.iterator]();case 9:if(e=(j=i.next()).done){a.next=20;break}if(!k[(l=j.value).name]){a.next=15;break}d=!0,a.next=17;break;case 15:return d=!1,a.abrupt("break",20);case 17:e=!0,a.next=9;break;case 20:a.next=26;break;case 22:a.prev=22,a.t0=a.catch(7),f=!0,g=a.t0;case 26:a.prev=26,a.prev=27,e||null==i.return||i.return();case 29:if(a.prev=29,!f){a.next=32;break}throw g;case 32:return a.finish(29);case 33:return a.finish(26);case 34:if(!(c.sourceSimpleData&&d)){a.next=54;break}if(a.prev=35,!G[h].justClone){a.next=40;break}a.t1=c.sourceSimpleData.clone(),a.next=43;break;case 40:return a.next=42,c.sourceSimpleData.clone()[h](k);case 42:a.t1=a.sent;case 43:x(b,m=a.t1),G[h].htmlOutput?p(c.sourceSimpleData.clone()[h](k)):p(null),v(null),a.next=52;break;case 49:a.prev=49,a.t2=a.catch(35),v(a.t2.message);case 52:a.next=55;break;case 54:p(null),x(b,null);case 55:a.next=58;break;case 57:p(null),x(b,null);case 58:case"end":return a.stop()}},a,null,[[7,22,26,34],[27,,29,33],[35,49]])}))).apply(this,arguments)}},[h,k,c.sourceSimpleData]),(0,d.jsxs)("div",{children:[(0,d.jsx)(f.HH,{type:"target",position:m.P.Top,id:"a"}),(0,d.jsxs)("div",{style:{backgroundColor:"white",border:"1px solid black",borderRadius:5,padding:10,maxWidth:["showTable","getChart"].includes(h)?1e3:300},children:[(0,d.jsxs)("select",{onChange:function(a){i(a.target.value),l({})},children:[(0,d.jsx)("option",{children:"Choose a method"}),Object.keys(G).map(function(a,b){return(0,d.jsx)("option",{children:a},"method-".concat(b))})]}),G[h]?(0,d.jsx)("div",{style:{marginTop:10},children:G[h].arguments.map(function(a,e){var f,g=(0,d.jsx)("div",{children:"".concat(a.name,":\xa0")});return"text"===a.type?f=(0,d.jsx)("input",{id:w(b,e,h),onChange:function(){return y()},defaultValue:a.defaultValue}):"number"===a.type?f=(0,d.jsx)("input",{id:w(b,e,h),onChange:function(){return y()},type:"number",defaultValue:a.defaultValue}):"checkbox"===a.type?f=(0,d.jsx)("input",{type:"checkbox",id:w(b,e,h),onChange:function(){return y()},style:{marginBottom:0},defaultChecked:a.defaultValue}):"keys"===a.type?f=(0,d.jsx)(E,{id:b,method:h,generateArgId:w,updateArgs:y,d:a,i:e,simpleData:c.sourceSimpleData}):"multipleKeys"===a.type?f=(0,d.jsx)(F,{id:b,method:h,generateArgId:w,updateArgs:y,d:a,i:e,simpleData:c.sourceSimpleData}):"select"===a.type&&(f=(0,d.jsx)("select",{id:w(b,e,h),onChange:function(){return y()},defaultValue:a.defaultValue,children:a.options.map(function(a,b){return(0,d.jsx)("option",{children:a},"".concat(h,"-option-").concat(b))})})),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:12,marginTop:5},children:[g,f]},w(b,e,h))})}):null,"showTable"===h&&c.simpleData?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(D,{keys:c.simpleData.getKeys(),data:c.simpleData.getData().slice(0,k.nbItemsInTable?k.nbItemsInTable:10)}),(0,d.jsx)("div",{style:{textAlign:"right",marginTop:5,fontSize:12},children:"".concat(c.simpleData.getLength()," items in total")})]}):null,(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:o}}),t?(0,d.jsx)("div",{style:{maxWidth:200,color:"red",marginTop:10},children:t}):null]}),(0,d.jsx)(f.HH,{type:"source",position:m.P.Bottom,id:"a"})]})}},K=0;function L(){var a=r(),b=a.nodes,c=a.edges,e=a.onNodesChange,i=a.onEdgesChange,j=a.onConnect,k=a.addCustomNode;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{position:"absolute",top:0,left:5,zIndex:10},children:[(0,d.jsxs)("div",{style:{padding:5,fontSize:12,backgroundColor:"white"},children:["Welcome on ",(0,d.jsx)("a",{href:"https://github.com/nshiab/simple-data-analysis-flow",children:"Simple Data Analysis Flow"}),"! The aim of this project is to allow non-coders to use the open source library ",(0,d.jsx)("a",{href:"https://github.com/nshiab/simple-data-analysis.js",children:"simple-data-analysis.js"})," with a node-based editor running in the browser. If you use this project, show off your work and tag me on ",(0,d.jsx)("a",{href:"https://twitter.com/NaelShiab",children:"Twitter"})," or ",(0,d.jsx)("a",{href:"https://www.linkedin.com/in/naelshiab/",children:"LinkedIn"}),"! Feel to start a conversation, raise an issue or contribute to the ",(0,d.jsx)("a",{href:"https://github.com/nshiab/simple-data-analysis-flow",children:"code on Github"}),"."]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsx)("button",{onClick:function(){return k("".concat(++K))},children:"Add node"}),(0,d.jsxs)("div",{style:{marginRight:5,fontSize:10,backgroundColor:"white"},children:["Version ",I.i8," with simple-data-analysis@",H.i8]})]})]}),(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)("div",{style:{width:"100vw",height:"100vh"},children:(0,d.jsxs)(f.ZP,{nodeTypes:J,nodes:b,edges:c,onNodesChange:e,onEdgesChange:i,onConnect:j,fitView:!0,children:[(0,d.jsx)(g.Z,{}),(0,d.jsx)(h.Z,{})]})})})]})}}},function(a){a.O(0,[770,895,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])